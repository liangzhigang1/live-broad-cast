{"remainingRequest":"/Users/liangzg/zixue/live-broad-cast/node_modules/babel-loader/lib/index.js!/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/zixue/live-broad-cast/src/components/ModalPanel/Lottery.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/zixue/live-broad-cast/src/components/ModalPanel/Lottery.vue","mtime":1611227050000},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/babel-loader/lib/index.js","mtime":1615566678361},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBldmVudEVtaXR0ZXIgPSBCSlkuZXZlbnRFbWl0dGVyOwp2YXIgYXV0aCA9IEJKWS5hdXRoOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICBjb21tYW5kTG90dGVyeUR1cmF0aW9uOiAwLAogICAgICBsb3R0ZXJ5VGltZXI6IG51bGwsCiAgICAgIGlzU3R1ZGVudDogYXV0aC5pc1N0dWRlbnQoKSwKICAgICAgbG90dGVyeUNvbW1hbmQ6ICIiLAogICAgICBsb3R0ZXJ5OiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgQkpZLkxvdHRlcnkuaW5pdCgpOwogICAgZXZlbnRFbWl0dGVyLm9uKGV2ZW50RW1pdHRlci5MT1RURVJZX0hJU1RPUllfUkVTLCBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgICAgX3RoaXMuc2hvdygpOwoKICAgICAgJCgiI2xvdHRlcnkiKS5oaWRlKCk7CiAgICAgICQoIiNsb3R0ZXJ5LWhpc3RvcnkiKS5zaG93KCk7IC8vIOafpeeci+S4reWllue6quW9lQoKICAgICAgdmFyIGhpc3RvcnlDb21wb25lbnQgPSBCSlkuTG90dGVyeUhpc3RvcnkuY3JlYXRlKHsKICAgICAgICByZXBsYWNlOiBmYWxzZSwKICAgICAgICBlbGVtZW50OiAkKCIjbG90dGVyeS1oaXN0b3J5IC5wbGFjZWhvbGRlciIpLAogICAgICAgIGxpc3Q6IGRhdGEuaGlzdG9yeSwKICAgICAgICByb29tSWQ6ICtCSlkuc3RvcmUuZ2V0KCJjbGFzcy5pZCIpCiAgICAgIH0pOwogICAgfSkgLy8gICDmoIflh4bmir3lpZYKICAgIC5vbihldmVudEVtaXR0ZXIuU1RBTkRBUkRfTE9UVEVSWV9CRUdJTiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zaG93KCk7CiAgICB9KS5vbihldmVudEVtaXR0ZXIuU1RBTkRBUkRfTE9UVEVSWV9CRUdJTl9UUklHR0VSLCBmdW5jdGlvbiAoKSB7CiAgICAgICQoIiNsb3R0ZXJ5IikuaGlkZSgpOwogICAgfSkub24oZXZlbnRFbWl0dGVyLlNUQU5EQVJEX0xPVFRFUllfRU5ELCBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgICAgX3RoaXMuc2hvdygpOwoKICAgICAgX3RoaXMuY3JlYXRlSGl0TGlzdChkYXRhKTsKICAgIH0pIC8vIOWPo+S7pOaKveWllgogICAgLm9uKGV2ZW50RW1pdHRlci5DT01NQU5EX0xPVFRFUllfQUJPUlQsIGZ1bmN0aW9uIChldmVudCwgZGF0YSkgewogICAgICBfdGhpcy5zaG93KCk7CgogICAgICBfdGhpcy5jcmVhdGVIaXRMaXN0KGRhdGEpOwogICAgfSkub24oZXZlbnRFbWl0dGVyLkNPTU1BTkRfTE9UVEVSWV9FTkRfVFJJR0dFUiwgZnVuY3Rpb24gKGV2ZW50LCBkYXRhKSB7CiAgICAgIF90aGlzLmNvbW1hbmRMb3R0ZXJ5RHVyYXRpb24gPSAwOwogICAgICAkKCIjbG90dGVyeSIpLmhpZGUoKTsKICAgICAgY29uc29sZS5sb2coImNvbW1hbmQgbG90dGVyeSBlbmQuIik7CiAgICB9KS5vbihldmVudEVtaXR0ZXIuQ09NTUFORF9MT1RURVJZX0JFSUdJTiwgZnVuY3Rpb24gKGUsIGRhdGEpIHsKICAgICAgJCgiI2xvdHRlcnkiKS5oaWRlKCk7CgogICAgICBfdGhpcy5zaG93KCk7CgogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgX3RoaXMuY29tbWFuZExvdHRlcnlEdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247CiAgICAgIF90aGlzLmxvdHRlcnlDb21tYW5kID0gZGF0YS5jb21tYW5kOwoKICAgICAgaWYgKF90aGlzLmxvdHRlcnlUaW1lcikgewogICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMubG90dGVyeVRpbWVyKTsKICAgICAgICBfdGhpcy5sb3R0ZXJ5VGltZXIgPSBudWxsOwogICAgICB9CgogICAgICBfdGhpcy5sb3R0ZXJ5VGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLmNvbW1hbmRMb3R0ZXJ5RHVyYXRpb24gPiAwKSB7CiAgICAgICAgICAtLV90aGlzLmNvbW1hbmRMb3R0ZXJ5RHVyYXRpb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF1dGguaXNUZWFjaGVyKCkgJiYgX3RoaXMuZHJhd0xvdHRlcnkoKTsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMubG90dGVyeVRpbWVyKTsKICAgICAgICAgIF90aGlzLmxvdHRlcnlUaW1lciA9IG51bGw7CiAgICAgICAgfQogICAgICB9LCAxMDAwKTsKICAgIH0pLm9uKCJ0b2dnbGVfbG90dGVyeSIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMudmlzaWJsZSA9ICFfdGhpcy52aXNpYmxlOwoKICAgICAgX3RoaXMuY3JlYXRlTG90dGVyeSgpOwogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5jcmVhdGVMb3R0ZXJ5KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAkKCIjbG90dGVyeSIpLnNob3coKTsKICAgICAgJCgiI2xvdHRlcnktaGlzdG9yeSIpLmhpZGUoKTsKICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWPo+S7pOW8gOWllgogICAgZHJhd0xvdHRlcnk6IGZ1bmN0aW9uIGRyYXdMb3R0ZXJ5KCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMubG90dGVyeVRpbWVyKTsKICAgICAgdGhpcy5sb3R0ZXJ5VGltZXIgPSBudWxsOwogICAgICB0aGlzLmNvbW1hbmRMb3R0ZXJ5RHVyYXRpb24gPSAwOwogICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcihldmVudEVtaXR0ZXIuQ09NTUFORF9MT1RURVJZX0FCT1JUX1RSSUdHRVIpOwogICAgfSwKICAgIC8vIOS4reWlluWQjeWNlQogICAgY3JlYXRlSGl0TGlzdDogZnVuY3Rpb24gY3JlYXRlSGl0TGlzdChkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgJCgiI2xvdHRlcnkiKS5oaWRlKCk7CiAgICAgICQoIiNsb3R0ZXJ5LWhpdCIpLnNob3coKTsKICAgICAgdmFyIGhpdENvbXBvbmVudCA9IEJKWS5Mb3R0ZXJ5SGl0LmNyZWF0ZSh7CiAgICAgICAgZWxlbWVudDogJCgiI2xvdHRlcnktaGl0IC5wbGFjZWhvbGRlciIpLAogICAgICAgIGxpc3Q6IGRhdGEuaGl0TGlzdCwKICAgICAgICByZXBsYWNlOiBmYWxzZSwKICAgICAgICBsb3R0ZXJ5TmFtZTogZGF0YS5sb3R0ZXJ5TmFtZSwKICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgY29uc29sZS5sb2coImxvdHRlcnkgY2xvc2UuIik7CiAgICAgICAgICAkKCIjbG90dGVyeS1oaXQiKS5oaWRlKCk7CiAgICAgICAgICAkKCIjbG90dGVyeSIpLnNob3coKTsKCiAgICAgICAgICBfdGhpczIuY2xvc2UoKTsKICAgICAgICB9LAogICAgICAgIC8vIOS4reWlluiAheWhq+WGmeS/oeaBrwogICAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChuYW1lLCB0ZWwpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKG5hbWUsIHRlbCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmICghYXV0aC5pc1N0dWRlbnQoKSAmJiAhaGl0Q29tcG9uZW50LmdldCgnaXNIaXQnKSkgewogICAgICAgIGhpdENvbXBvbmVudC5zZXQoJ3N0YXR1cycsIDApOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlTG90dGVyeTogZnVuY3Rpb24gY3JlYXRlTG90dGVyeSgpIHsKICAgICAgY29uc29sZS5sb2coImNyZWF0ZSBsb3R0ZXJ5LiIpOwoKICAgICAgaWYgKGF1dGguaXNUZWFjaGVyKCkpIHsKICAgICAgICB0aGlzLmxvdHRlcnkgPSBudWxsOwogICAgICAgIHRoaXMubG90dGVyeSA9IEJKWS5Mb3R0ZXJ5LmNyZWF0ZSh7CiAgICAgICAgICByZXBsYWNlOiBmYWxzZSwKICAgICAgICAgIGVsZW1lbnQ6ICQoIiNsb3R0ZXJ5IC5wbGFjZWhvbGRlciIpLAogICAgICAgICAgLy8g5Y+v5Lul5Lyg5YWl6Ieq5a6a5LmJ55qu6IKk6YeN5YaZ5qC35byPIOm7mOiupOe6ouiJsgogICAgICAgICAgc2tpbjogInJlZCIKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxvdHRlcnkub24oInJlZnJlc2giLCBmdW5jdGlvbiAoKSB7Ly8g5oq95aWW5qih5byP5pu05pawIOWIh+aNouagh+WHhuaKveWlluaIluiAheWPo+S7pOaKveWllgogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Lottery.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 模态框组件：在老师端发起各种互动后弹出 -->\n<!-- 如：点名、答题等 -->\n\n<template>\n  <div\n    v-show=\"visible\"\n    id=\"bjy-lottery\"\n    :class=\"{ 'command-lottery-hint': commandLotteryDuration }\"\n  >\n    <div v-if=\"!commandLotteryDuration\" class=\"mask\"></div>\n    <div class=\"lottery-wrap\">\n      <div id=\"lottery\">\n        <div class=\"placeholder\"></div>\n        <div class=\"bjy-close\" @click=\"close\">X</div>\n      </div>\n\n      <div id=\"lottery-hit\">\n        <div class=\"placeholder\"></div>\n      </div>\n\n      <div id=\"lottery-history\">\n        <div class=\"bjy-close\" @click=\"close\">\n          X\n        </div>\n        <div class=\"placeholder\"></div>\n      </div>\n    </div>\n\n    <div v-if=\"commandLotteryDuration\" class=\"command-lottery-count\">\n      <p>抽奖中，剩余{{ commandLotteryDuration }}秒</p>\n      <div v-if=\"!isStudent\" class=\"btn\" @click=\"drawLottery\">现在开奖</div>\n      <div v-else>聊天框输入{{ lotteryCommand }}参与抽奖</div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst eventEmitter = BJY.eventEmitter;\nconst auth = BJY.auth;\n\nexport default {\n  data() {\n    return {\n      visible: false,\n      commandLotteryDuration: 0,\n      lotteryTimer: null,\n      isStudent: auth.isStudent(),\n      lotteryCommand: \"\",\n      lottery: null,\n    };\n  },\n  created() {\n    BJY.Lottery.init();\n    eventEmitter\n      .on(eventEmitter.LOTTERY_HISTORY_RES, (event, data) => {\n        this.show();\n        $(\"#lottery\").hide();\n        $(\"#lottery-history\").show();\n        // 查看中奖纪录\n        var historyComponent = BJY.LotteryHistory.create({\n          replace: false,\n          element: $(\"#lottery-history .placeholder\"),\n          list: data.history,\n          roomId: +BJY.store.get(\"class.id\"),\n        });\n      })\n      //   标准抽奖\n      .on(eventEmitter.STANDARD_LOTTERY_BEGIN, () => {\n        this.show();\n      })\n      .on(eventEmitter.STANDARD_LOTTERY_BEGIN_TRIGGER, () => {\n        $(\"#lottery\").hide();\n      })\n      .on(eventEmitter.STANDARD_LOTTERY_END, (event, data) => {\n        this.show();\n        this.createHitList(data);\n      })\n      // 口令抽奖\n      .on(eventEmitter.COMMAND_LOTTERY_ABORT, (event, data) => {\n        this.show();\n        this.createHitList(data);\n      })\n      .on(eventEmitter.COMMAND_LOTTERY_END_TRIGGER, (event, data) => {\n        this.commandLotteryDuration = 0;\n        $(\"#lottery\").hide();\n        console.log(\"command lottery end.\");\n      })\n      .on(eventEmitter.COMMAND_LOTTERY_BEIGIN, (e, data) => {\n        $(\"#lottery\").hide();\n        this.show();\n        console.log(data);\n        this.commandLotteryDuration = data.duration;\n        this.lotteryCommand = data.command;\n        if (this.lotteryTimer) {\n          clearInterval(this.lotteryTimer);\n          this.lotteryTimer = null;\n        }\n        this.lotteryTimer = setInterval(() => {\n          if (this.commandLotteryDuration > 0) {\n            --this.commandLotteryDuration;\n          } else {\n            auth.isTeacher() && this.drawLottery();\n            clearInterval(this.lotteryTimer);\n            this.lotteryTimer = null;\n          }\n        }, 1000);\n      })\n      .on(\"toggle_lottery\", () => {\n        this.visible = !this.visible;\n        this.createLottery();\n      });\n  },\n  mounted() {\n    this.createLottery();\n  },\n  methods: {\n    close() {\n      this.visible = false;\n      $(\"#lottery\").show();\n      $(\"#lottery-history\").hide();\n    },\n    show() {\n      this.visible = true;\n    },\n    // 口令开奖\n    drawLottery() {\n      clearInterval(this.lotteryTimer);\n      this.lotteryTimer = null;\n      this.commandLotteryDuration = 0;\n      eventEmitter.trigger(eventEmitter.COMMAND_LOTTERY_ABORT_TRIGGER);\n    },\n    // 中奖名单\n    createHitList(data) {\n      $(\"#lottery\").hide();\n      $(\"#lottery-hit\").show();\n      var hitComponent = BJY.LotteryHit.create({\n        element: $(\"#lottery-hit .placeholder\"),\n        list: data.hitList,\n        replace: false,\n        lotteryName: data.lotteryName,\n        onClose: () => {\n          console.log(\"lottery close.\");\n          $(\"#lottery-hit\").hide();\n          $(\"#lottery\").show();\n          this.close();\n        },\n        // 中奖者填写信息\n        onSubmit: (name, tel) => {\n          console.log(name, tel);\n        },\n      });\n\n      if (!auth.isStudent() && !hitComponent.get('isHit')) {\n          hitComponent.set('status', 0);\n      }\n    },\n\n    createLottery() {\n      console.log(\"create lottery.\");\n      if (auth.isTeacher()) {\n        this.lottery = null;\n        this.lottery = BJY.Lottery.create({\n          replace: false,\n          element: $(\"#lottery .placeholder\"),\n          // 可以传入自定义皮肤重写样式 默认红色\n          skin: \"red\",\n        });\n\n        this.lottery.on(\"refresh\", function () {\n          // 抽奖模式更新 切换标准抽奖或者口令抽奖\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#bjy-lottery {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  box-shadow: none;\n  z-index: 11;\n  transform: none;\n\n  &.command-lottery-hint {\n    left: 10px;\n    padding: 10px;\n    bottom: 100px;\n    top: unset;\n    width: 240px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background: #fff;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);\n  }\n\n  #lottery-history {\n    background: #fff;\n  }\n\n  .mask {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    z-index: 0;\n    background: rgba(0, 0, 0, 0.2);\n  }\n\n  .lottery-wrap {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n\n    .bjy-close {\n      position: absolute;\n      top: -10px;\n      right: -20px;\n      color: #fff;\n      font-size: 20px;\n      cursor: pointer;\n    }\n  }\n\n  .command-lottery-count {\n    .btn {\n      background: #1795ff;\n      color: #fff;\n      padding: 0 20px;\n      line-height: 30px;\n      height: 30px;\n      cursor: pointer;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ModalPanel"}]}