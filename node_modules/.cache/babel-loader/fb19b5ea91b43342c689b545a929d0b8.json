{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js!/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/ModalPanel/Lottery.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/ModalPanel/Lottery.vue","mtime":1611227050000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js","mtime":1615566678361},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIGV2ZW50RW1pdHRlciA9IEJKWS5ldmVudEVtaXR0ZXI7CnZhciBhdXRoID0gQkpZLmF1dGg7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGNvbW1hbmRMb3R0ZXJ5RHVyYXRpb246IDAsCiAgICAgIGxvdHRlcnlUaW1lcjogbnVsbCwKICAgICAgaXNTdHVkZW50OiBhdXRoLmlzU3R1ZGVudCgpLAogICAgICBsb3R0ZXJ5Q29tbWFuZDogIiIsCiAgICAgIGxvdHRlcnk6IG51bGwKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBCSlkuTG90dGVyeS5pbml0KCk7CiAgICBldmVudEVtaXR0ZXIub24oZXZlbnRFbWl0dGVyLkxPVFRFUllfSElTVE9SWV9SRVMsIGZ1bmN0aW9uIChldmVudCwgZGF0YSkgewogICAgICBfdGhpcy5zaG93KCk7CgogICAgICAkKCIjbG90dGVyeSIpLmhpZGUoKTsKICAgICAgJCgiI2xvdHRlcnktaGlzdG9yeSIpLnNob3coKTsgLy8g5p+l55yL5Lit5aWW57qq5b2VCgogICAgICB2YXIgaGlzdG9yeUNvbXBvbmVudCA9IEJKWS5Mb3R0ZXJ5SGlzdG9yeS5jcmVhdGUoewogICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgIGVsZW1lbnQ6ICQoIiNsb3R0ZXJ5LWhpc3RvcnkgLnBsYWNlaG9sZGVyIiksCiAgICAgICAgbGlzdDogZGF0YS5oaXN0b3J5LAogICAgICAgIHJvb21JZDogK0JKWS5zdG9yZS5nZXQoImNsYXNzLmlkIikKICAgICAgfSk7CiAgICB9KSAvLyAgIOagh+WHhuaKveWllgogICAgLm9uKGV2ZW50RW1pdHRlci5TVEFOREFSRF9MT1RURVJZX0JFR0lOLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNob3coKTsKICAgIH0pLm9uKGV2ZW50RW1pdHRlci5TVEFOREFSRF9MT1RURVJZX0JFR0lOX1RSSUdHRVIsIGZ1bmN0aW9uICgpIHsKICAgICAgJCgiI2xvdHRlcnkiKS5oaWRlKCk7CiAgICB9KS5vbihldmVudEVtaXR0ZXIuU1RBTkRBUkRfTE9UVEVSWV9FTkQsIGZ1bmN0aW9uIChldmVudCwgZGF0YSkgewogICAgICBfdGhpcy5zaG93KCk7CgogICAgICBfdGhpcy5jcmVhdGVIaXRMaXN0KGRhdGEpOwogICAgfSkgLy8g5Y+j5Luk5oq95aWWCiAgICAub24oZXZlbnRFbWl0dGVyLkNPTU1BTkRfTE9UVEVSWV9BQk9SVCwgZnVuY3Rpb24gKGV2ZW50LCBkYXRhKSB7CiAgICAgIF90aGlzLnNob3coKTsKCiAgICAgIF90aGlzLmNyZWF0ZUhpdExpc3QoZGF0YSk7CiAgICB9KS5vbihldmVudEVtaXR0ZXIuQ09NTUFORF9MT1RURVJZX0VORF9UUklHR0VSLCBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgICAgX3RoaXMuY29tbWFuZExvdHRlcnlEdXJhdGlvbiA9IDA7CiAgICAgICQoIiNsb3R0ZXJ5IikuaGlkZSgpOwogICAgICBjb25zb2xlLmxvZygiY29tbWFuZCBsb3R0ZXJ5IGVuZC4iKTsKICAgIH0pLm9uKGV2ZW50RW1pdHRlci5DT01NQU5EX0xPVFRFUllfQkVJR0lOLCBmdW5jdGlvbiAoZSwgZGF0YSkgewogICAgICAkKCIjbG90dGVyeSIpLmhpZGUoKTsKCiAgICAgIF90aGlzLnNob3coKTsKCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBfdGhpcy5jb21tYW5kTG90dGVyeUR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjsKICAgICAgX3RoaXMubG90dGVyeUNvbW1hbmQgPSBkYXRhLmNvbW1hbmQ7CgogICAgICBpZiAoX3RoaXMubG90dGVyeVRpbWVyKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy5sb3R0ZXJ5VGltZXIpOwogICAgICAgIF90aGlzLmxvdHRlcnlUaW1lciA9IG51bGw7CiAgICAgIH0KCiAgICAgIF90aGlzLmxvdHRlcnlUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMuY29tbWFuZExvdHRlcnlEdXJhdGlvbiA+IDApIHsKICAgICAgICAgIC0tX3RoaXMuY29tbWFuZExvdHRlcnlEdXJhdGlvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXV0aC5pc1RlYWNoZXIoKSAmJiBfdGhpcy5kcmF3TG90dGVyeSgpOwogICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy5sb3R0ZXJ5VGltZXIpOwogICAgICAgICAgX3RoaXMubG90dGVyeVRpbWVyID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSkub24oInRvZ2dsZV9sb3R0ZXJ5IiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy52aXNpYmxlID0gIV90aGlzLnZpc2libGU7CgogICAgICBfdGhpcy5jcmVhdGVMb3R0ZXJ5KCk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNyZWF0ZUxvdHRlcnkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICAgICQoIiNsb3R0ZXJ5Iikuc2hvdygpOwogICAgICAkKCIjbG90dGVyeS1oaXN0b3J5IikuaGlkZSgpOwogICAgfSwKICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g5Y+j5Luk5byA5aWWCiAgICBkcmF3TG90dGVyeTogZnVuY3Rpb24gZHJhd0xvdHRlcnkoKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5sb3R0ZXJ5VGltZXIpOwogICAgICB0aGlzLmxvdHRlcnlUaW1lciA9IG51bGw7CiAgICAgIHRoaXMuY29tbWFuZExvdHRlcnlEdXJhdGlvbiA9IDA7CiAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKGV2ZW50RW1pdHRlci5DT01NQU5EX0xPVFRFUllfQUJPUlRfVFJJR0dFUik7CiAgICB9LAogICAgLy8g5Lit5aWW5ZCN5Y2VCiAgICBjcmVhdGVIaXRMaXN0OiBmdW5jdGlvbiBjcmVhdGVIaXRMaXN0KGRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAkKCIjbG90dGVyeSIpLmhpZGUoKTsKICAgICAgJCgiI2xvdHRlcnktaGl0Iikuc2hvdygpOwogICAgICB2YXIgaGl0Q29tcG9uZW50ID0gQkpZLkxvdHRlcnlIaXQuY3JlYXRlKHsKICAgICAgICBlbGVtZW50OiAkKCIjbG90dGVyeS1oaXQgLnBsYWNlaG9sZGVyIiksCiAgICAgICAgbGlzdDogZGF0YS5oaXRMaXN0LAogICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgIGxvdHRlcnlOYW1lOiBkYXRhLmxvdHRlcnlOYW1lLAogICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygibG90dGVyeSBjbG9zZS4iKTsKICAgICAgICAgICQoIiNsb3R0ZXJ5LWhpdCIpLmhpZGUoKTsKICAgICAgICAgICQoIiNsb3R0ZXJ5Iikuc2hvdygpOwoKICAgICAgICAgIF90aGlzMi5jbG9zZSgpOwogICAgICAgIH0sCiAgICAgICAgLy8g5Lit5aWW6ICF5aGr5YaZ5L+h5oGvCiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KG5hbWUsIHRlbCkgewogICAgICAgICAgY29uc29sZS5sb2cobmFtZSwgdGVsKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKCFhdXRoLmlzU3R1ZGVudCgpICYmICFoaXRDb21wb25lbnQuZ2V0KCdpc0hpdCcpKSB7CiAgICAgICAgaGl0Q29tcG9uZW50LnNldCgnc3RhdHVzJywgMCk7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVMb3R0ZXJ5OiBmdW5jdGlvbiBjcmVhdGVMb3R0ZXJ5KCkgewogICAgICBjb25zb2xlLmxvZygiY3JlYXRlIGxvdHRlcnkuIik7CgogICAgICBpZiAoYXV0aC5pc1RlYWNoZXIoKSkgewogICAgICAgIHRoaXMubG90dGVyeSA9IG51bGw7CiAgICAgICAgdGhpcy5sb3R0ZXJ5ID0gQkpZLkxvdHRlcnkuY3JlYXRlKHsKICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgICAgZWxlbWVudDogJCgiI2xvdHRlcnkgLnBsYWNlaG9sZGVyIiksCiAgICAgICAgICAvLyDlj6/ku6XkvKDlhaXoh6rlrprkuYnnmq7ogqTph43lhpnmoLflvI8g6buY6K6k57qi6ImyCiAgICAgICAgICBza2luOiAicmVkIgogICAgICAgIH0pOwogICAgICAgIHRoaXMubG90dGVyeS5vbigicmVmcmVzaCIsIGZ1bmN0aW9uICgpIHsvLyDmir3lpZbmqKHlvI/mm7TmlrAg5YiH5o2i5qCH5YeG5oq95aWW5oiW6ICF5Y+j5Luk5oq95aWWCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Lottery.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 模态框组件：在老师端发起各种互动后弹出 -->\n<!-- 如：点名、答题等 -->\n\n<template>\n  <div\n    v-show=\"visible\"\n    id=\"bjy-lottery\"\n    :class=\"{ 'command-lottery-hint': commandLotteryDuration }\"\n  >\n    <div v-if=\"!commandLotteryDuration\" class=\"mask\"></div>\n    <div class=\"lottery-wrap\">\n      <div id=\"lottery\">\n        <div class=\"placeholder\"></div>\n        <div class=\"bjy-close\" @click=\"close\">X</div>\n      </div>\n\n      <div id=\"lottery-hit\">\n        <div class=\"placeholder\"></div>\n      </div>\n\n      <div id=\"lottery-history\">\n        <div class=\"bjy-close\" @click=\"close\">\n          X\n        </div>\n        <div class=\"placeholder\"></div>\n      </div>\n    </div>\n\n    <div v-if=\"commandLotteryDuration\" class=\"command-lottery-count\">\n      <p>抽奖中，剩余{{ commandLotteryDuration }}秒</p>\n      <div v-if=\"!isStudent\" class=\"btn\" @click=\"drawLottery\">现在开奖</div>\n      <div v-else>聊天框输入{{ lotteryCommand }}参与抽奖</div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst eventEmitter = BJY.eventEmitter;\nconst auth = BJY.auth;\n\nexport default {\n  data() {\n    return {\n      visible: false,\n      commandLotteryDuration: 0,\n      lotteryTimer: null,\n      isStudent: auth.isStudent(),\n      lotteryCommand: \"\",\n      lottery: null,\n    };\n  },\n  created() {\n    BJY.Lottery.init();\n    eventEmitter\n      .on(eventEmitter.LOTTERY_HISTORY_RES, (event, data) => {\n        this.show();\n        $(\"#lottery\").hide();\n        $(\"#lottery-history\").show();\n        // 查看中奖纪录\n        var historyComponent = BJY.LotteryHistory.create({\n          replace: false,\n          element: $(\"#lottery-history .placeholder\"),\n          list: data.history,\n          roomId: +BJY.store.get(\"class.id\"),\n        });\n      })\n      //   标准抽奖\n      .on(eventEmitter.STANDARD_LOTTERY_BEGIN, () => {\n        this.show();\n      })\n      .on(eventEmitter.STANDARD_LOTTERY_BEGIN_TRIGGER, () => {\n        $(\"#lottery\").hide();\n      })\n      .on(eventEmitter.STANDARD_LOTTERY_END, (event, data) => {\n        this.show();\n        this.createHitList(data);\n      })\n      // 口令抽奖\n      .on(eventEmitter.COMMAND_LOTTERY_ABORT, (event, data) => {\n        this.show();\n        this.createHitList(data);\n      })\n      .on(eventEmitter.COMMAND_LOTTERY_END_TRIGGER, (event, data) => {\n        this.commandLotteryDuration = 0;\n        $(\"#lottery\").hide();\n        console.log(\"command lottery end.\");\n      })\n      .on(eventEmitter.COMMAND_LOTTERY_BEIGIN, (e, data) => {\n        $(\"#lottery\").hide();\n        this.show();\n        console.log(data);\n        this.commandLotteryDuration = data.duration;\n        this.lotteryCommand = data.command;\n        if (this.lotteryTimer) {\n          clearInterval(this.lotteryTimer);\n          this.lotteryTimer = null;\n        }\n        this.lotteryTimer = setInterval(() => {\n          if (this.commandLotteryDuration > 0) {\n            --this.commandLotteryDuration;\n          } else {\n            auth.isTeacher() && this.drawLottery();\n            clearInterval(this.lotteryTimer);\n            this.lotteryTimer = null;\n          }\n        }, 1000);\n      })\n      .on(\"toggle_lottery\", () => {\n        this.visible = !this.visible;\n        this.createLottery();\n      });\n  },\n  mounted() {\n    this.createLottery();\n  },\n  methods: {\n    close() {\n      this.visible = false;\n      $(\"#lottery\").show();\n      $(\"#lottery-history\").hide();\n    },\n    show() {\n      this.visible = true;\n    },\n    // 口令开奖\n    drawLottery() {\n      clearInterval(this.lotteryTimer);\n      this.lotteryTimer = null;\n      this.commandLotteryDuration = 0;\n      eventEmitter.trigger(eventEmitter.COMMAND_LOTTERY_ABORT_TRIGGER);\n    },\n    // 中奖名单\n    createHitList(data) {\n      $(\"#lottery\").hide();\n      $(\"#lottery-hit\").show();\n      var hitComponent = BJY.LotteryHit.create({\n        element: $(\"#lottery-hit .placeholder\"),\n        list: data.hitList,\n        replace: false,\n        lotteryName: data.lotteryName,\n        onClose: () => {\n          console.log(\"lottery close.\");\n          $(\"#lottery-hit\").hide();\n          $(\"#lottery\").show();\n          this.close();\n        },\n        // 中奖者填写信息\n        onSubmit: (name, tel) => {\n          console.log(name, tel);\n        },\n      });\n\n      if (!auth.isStudent() && !hitComponent.get('isHit')) {\n          hitComponent.set('status', 0);\n      }\n    },\n\n    createLottery() {\n      console.log(\"create lottery.\");\n      if (auth.isTeacher()) {\n        this.lottery = null;\n        this.lottery = BJY.Lottery.create({\n          replace: false,\n          element: $(\"#lottery .placeholder\"),\n          // 可以传入自定义皮肤重写样式 默认红色\n          skin: \"red\",\n        });\n\n        this.lottery.on(\"refresh\", function () {\n          // 抽奖模式更新 切换标准抽奖或者口令抽奖\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#bjy-lottery {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  box-shadow: none;\n  z-index: 11;\n  transform: none;\n\n  &.command-lottery-hint {\n    left: 10px;\n    padding: 10px;\n    bottom: 100px;\n    top: unset;\n    width: 240px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background: #fff;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);\n  }\n\n  #lottery-history {\n    background: #fff;\n  }\n\n  .mask {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    z-index: 0;\n    background: rgba(0, 0, 0, 0.2);\n  }\n\n  .lottery-wrap {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n\n    .bjy-close {\n      position: absolute;\n      top: -10px;\n      right: -20px;\n      color: #fff;\n      font-size: 20px;\n      cursor: pointer;\n    }\n  }\n\n  .command-lottery-count {\n    .btn {\n      background: #1795ff;\n      color: #fff;\n      padding: 0 20px;\n      line-height: 30px;\n      height: 30px;\n      cursor: pointer;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ModalPanel"}]}