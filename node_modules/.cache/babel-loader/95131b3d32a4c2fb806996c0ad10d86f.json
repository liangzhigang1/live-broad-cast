{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js!/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/InteractionPanel/MessageList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/InteractionPanel/MessageList.vue","mtime":1615575708643},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js","mtime":1615566678361},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB1c2VyUm9sZU1hcCBmcm9tICcuL2NvbW1vbi9yb2xlTWFwJzsKdmFyIGF1dGggPSBCSlkuYXV0aDsKdmFyIHN0b3JlID0gQkpZLnN0b3JlOwp2YXIgZXZlbnRFbWl0dGVyID0gQkpZLmV2ZW50RW1pdHRlcjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBtZXRob2RzOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8g5pS25Yiw5paw5raI5oGv5pe2dGFi5qCP5a+55bqUdGFi57uZ5Ye65o+Q56S6CiAgICBldmVudEVtaXR0ZXIub24oZXZlbnRFbWl0dGVyLk1FU1NBR0VfUkVDRUlWRSwgZnVuY3Rpb24gKGUsIGRhdGUpIHsKICAgICAgdmFyIGVsZW1lbnQgPSAkKCcjYnRuLW1lc3NhZ2UtbGlzdCcpOwoKICAgICAgaWYgKCFlbGVtZW50Lmhhc0NsYXNzKCdhY3RpdmUnKSkgewogICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2hhcy1uZXcnKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8g5YWs5ZGKCiAgICBCSlkuTm90aWNlLmNyZWF0ZSh7CiAgICAgIGVsZW1lbnQ6ICQoJyNtZXNzYWdlLXBhbmVsIC5ub3RpY2UnKSwKICAgICAgLy8g54i25a655ZmoCiAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICBkZWZhdWx0Q29udGVudDogJ+i/memHjOepuuepuuWmguS5ny4uLicsCiAgICAgIC8vIOm7mOiupOaXoOWFrOWRiuaXtuaYvuekuuaWh+acrAogICAgICBtYXhMZW5ndGg6IDE0MCwKICAgICAgLy8g5YWs5ZGK5paH5pys5pyA5aSn6ZW/5bqmCiAgICAgIGNvbnRlbnRQbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeWFrOWRiuato+aWh+WGheWuuScsCiAgICAgIC8vIOWFrOWRiuaWh+acrOe8lui+keahhuaPkOekugogICAgICBsaW5rUGxhY2Vob2xkZXI6ICfor7fovpPlhaXlhazlkYrot7Povazpk77mjqXvvIjlj6/pgInvvIknLAogICAgICAvLyDlhazlkYrpk77mjqXnvJbovpHmoYbmj5DnpLoKICAgICAgbGlua0Vycm9ySGludDogJ1VSTCDmoLzlvI/plJnor68nLAogICAgICAvLyB1cmwg6ZSZ6K+v5o+Q56S6CiAgICAgIGNhbkVkaXQ6IGF1dGguaXNUZWFjaGVyKCkgfHwgYXV0aC5pc0Fzc2lzdGFudCgpCiAgICB9KTsgLy8g5Yib5bu65raI5oGv5YiX6KGo57uE5Lu2CgogICAgQkpZLk1lc3NhZ2VMaXN0LmNyZWF0ZSh7CiAgICAgIGVsZW1lbnQ6ICQoJyNtZXNzYWdlLXBhbmVsIC5tZXNzYWdlLWxpc3QnKSwKICAgICAgcmVuZGVyRW1vamk6IGZ1bmN0aW9uIHJlbmRlckVtb2ppKG5hbWUsIHVybCkgewogICAgICAgIGlmIChCSlkuaXNBbGljbG91ZEltYWdlKHVybCkpIHsKICAgICAgICAgIHJldHVybiAnPGltZyBvbmRyYWdzdGFydD0icmV0dXJuIGZhbHNlIiBzcmM9IicgKyAodXJsICsgJ0AxMDB3XzFlXzFsLnBuZycpICsgJyIgc3Jjc2V0PSInICsgKHVybCArICdAMjAwd18xZV8xbC5wbmcnKSArICcgMngiPic7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJzxpbWcgb25kcmFnc3RhcnQ9InJldHVybiBmYWxzZSIgc3JjPSInICsgdXJsICsgJyI+JzsKICAgICAgfSwKICAgICAgcmVuZGVySW1hZ2U6IGZ1bmN0aW9uIHJlbmRlckltYWdlKHVybCkgewogICAgICAgIGlmIChCSlkuaXNBbGljbG91ZEltYWdlKHVybCkpIHsKICAgICAgICAgIHJldHVybiAnPGltZyBvbmRyYWdzdGFydD0icmV0dXJuIGZhbHNlIiBzcmM9IicgKyAodXJsICsgJ0AxMDB3XzFlXzFsLnBuZycpICsgJyIgc3Jjc2V0PSInICsgKHVybCArICdAMjAwd18xZV8xbC5wbmcnKSArICcgMngiPic7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJzxpbWcgb25kcmFnc3RhcnQ9InJldHVybiBmYWxzZSIgc3JjPSInICsgdXJsICsgJyI+JzsKICAgICAgfSwKICAgICAgcmVuZGVyVXNlcjogZnVuY3Rpb24gcmVuZGVyVXNlcih1c2VyLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiB1c2VyLmlkLAogICAgICAgICAgbmFtZTogdXNlci5uYW1lLAogICAgICAgICAgbnVtYmVyOiB1c2VyLm51bWJlciwKICAgICAgICAgIC8vIOWktOWDj+mcgOWOi+e8qQogICAgICAgICAgYXZhdGFyOiBCSlkuY29tcHJlc3NJbWFnZSh7CiAgICAgICAgICAgIHVybDogdXNlci5hdmF0YXIsCiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQKICAgICAgICAgIH0pLAogICAgICAgICAgYXZhdGFyMng6IEJKWS5jb21wcmVzc0ltYWdlKHsKICAgICAgICAgICAgdXJsOiB1c2VyLmF2YXRhciwKICAgICAgICAgICAgd2lkdGg6IHdpZHRoICogMiwKICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgKiAyCiAgICAgICAgICB9KSwKICAgICAgICAgIC8vIOagueaNrueUqOaIt+exu+Wei++8jOmFjee9ruinkuiJsueahOiLseaWh+WSjOacrOWcsOivreiogAogICAgICAgICAgcm9sZTogdXNlclJvbGVNYXBbdXNlci50eXBlXS5lbiwKICAgICAgICAgIGxvY2FsUm9sZTogdXNlclJvbGVNYXBbdXNlci50eXBlXS5jbiwKICAgICAgICAgIHR5cGU6IHVzZXIudHlwZQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIGxvYWREaXN0YW5jZTogMAogICAgfSk7IC8vIOWIm+W7uua2iOaBr+WPkemAgee7hOS7tgoKICAgIEJKWS5NZXNzYWdlU2VuZGVyLmNyZWF0ZSh7CiAgICAgIGVsZW1lbnQ6ICQoJyNtZXNzYWdlLXBhbmVsIC5tZXNzYWdlLXNlbmRlcicpLAogICAgICBjYW5TZW5kRW1vamk6IHRydWUsCiAgICAgIGNhblNlbmRJbWFnZTogdHJ1ZSwKICAgICAgbXVsdGlsaW5lOiB0cnVlLAogICAgICBtZXNzYWdlTWF4TGVuZ3RoOiAxNDAsCiAgICAgIHBsYWNlaG9sZGVyOiAn6K+36L6T5YWlLi4uJywKICAgICAgZW1vdGlvbkxpc3Q6IHsKICAgICAgICBlbW90aW9uUGVyUm93OiA2LAogICAgICAgIHJvd1BlclBhZ2U6IDQKICAgICAgfSwKICAgICAgaW1hZ2VVcGxvYWRlcjogewogICAgICAgIGFjdGlvbjogJy93ZWIvZG9jL3VwbG9hZENoYXRGaWxlJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICByb29tX2lkOiBzdG9yZS5nZXQoJ2NsYXNzLmlkJyksCiAgICAgICAgICB0b2tlbjogc3RvcmUuZ2V0KCd0b2tlbicpCiAgICAgICAgfSwKICAgICAgICBmaWxlTmFtZTogJ0ZpbGVkYXRhJwogICAgICB9CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7fQp9Ow=="},{"version":3,"sources":["MessageList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"message-panel\">\n    <div class=\"notice\">\n    </div>\n    <div class=\"message-list\">\n    </div>\n    <div class=\"message-sender\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport userRoleMap from './common/roleMap'\nconst auth = BJY.auth;\nconst store = BJY.store;\nconst eventEmitter = BJY.eventEmitter;\n\nexport default {\n  data () {\n    return {}\n  },\n  methods: {},\n  created () {\n    // 收到新消息时tab栏对应tab给出提示\n    eventEmitter.on(\n      eventEmitter.MESSAGE_RECEIVE,\n      function (e, date) {\n        var element = $('#btn-message-list')\n        if (!element.hasClass('active')) {\n          element.addClass('has-new')\n        }\n      }\n    )\n  },\n  mounted () {\n    // 公告\n    BJY.Notice.create({\n      element: $('#message-panel .notice'), // 父容器\n      replace: false,\n      defaultContent: '这里空空如也...', // 默认无公告时显示文本\n      maxLength: 140, // 公告文本最大长度\n      contentPlaceholder: '请输入公告正文内容', // 公告文本编辑框提示\n      linkPlaceholder: '请输入公告跳转链接（可选）', // 公告链接编辑框提示\n      linkErrorHint: 'URL 格式错误', // url 错误提示\n      canEdit: auth.isTeacher() || auth.isAssistant()\n    })\n    // 创建消息列表组件\n    BJY.MessageList.create({\n      element: $('#message-panel .message-list'),\n      renderEmoji: function (name, url) {\n        if (BJY.isAlicloudImage(url)) {\n          return '<img ondragstart=\"return false\" src=\"' +\n                        (url + '@100w_1e_1l.png') +\n                        '\" srcset=\"' +\n                        (url + '@200w_1e_1l.png') +\n                        ' 2x\">'\n        }\n        return '<img ondragstart=\"return false\" src=\"' + url + '\">'\n      },\n      renderImage: function (url) {\n        if (BJY.isAlicloudImage(url)) {\n          return '<img ondragstart=\"return false\" src=\"' +\n                        (url + '@100w_1e_1l.png') +\n                        '\" srcset=\"' +\n                        (url + '@200w_1e_1l.png') +\n                        ' 2x\">'\n        }\n        return '<img ondragstart=\"return false\" src=\"' + url + '\">'\n      },\n      renderUser: function (user, width, height) {\n        return {\n          id: user.id,\n          name: user.name,\n          number: user.number,\n          // 头像需压缩\n          avatar: BJY.compressImage({\n            url: user.avatar,\n            width: width,\n            height: height\n          }),\n          avatar2x: BJY.compressImage({\n            url: user.avatar,\n            width: width * 2,\n            height: height * 2\n          }),\n          // 根据用户类型，配置角色的英文和本地语言\n          role: userRoleMap[user.type].en,\n          localRole: userRoleMap[user.type].cn,\n          type: user.type\n        }\n      },\n      loadDistance: 0\n    })\n    // 创建消息发送组件\n    BJY.MessageSender.create({\n      element: $('#message-panel .message-sender'),\n      canSendEmoji: true,\n      canSendImage: true,\n      multiline: true,\n      messageMaxLength: 140,\n      placeholder: '请输入...',\n      emotionList: {\n        emotionPerRow: 6,\n        rowPerPage: 4\n      },\n      imageUploader: {\n          action: '/web/doc/uploadChatFile',\n          data: {\n            room_id: store.get('class.id'),\n            token: store.get('token')\n          },\n          fileName: 'Filedata'\n      },\n    })\n  },\n  beforeDestroy () {}\n}\n</script>\n\n<style lang='scss'>\n//@import url(); 引入公共css类\n#message-panel {\n  width: 100%;\n  height: 100%;\n\n  .notice {\n    position: absolute;\n    top: 0;\n    z-index: 1;\n    background: #fff;\n    width: 100%;\n    border-top: 1px solid #ddd;\n  }\n\n  .bjy-message-list {\n    bottom: 110px;\n    height: unset;\n    top: 32px;\n  }\n\n  .bjy-message-sender {\n    position: absolute;\n    bottom: 10px;\n    width: 100%;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/InteractionPanel"}]}