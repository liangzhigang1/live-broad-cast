{"remainingRequest":"/Users/liangzg/zixue/live-broad-cast/node_modules/babel-loader/lib/index.js!/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/zixue/live-broad-cast/src/components/ModalPanel/RollCallTeacher.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/zixue/live-broad-cast/src/components/ModalPanel/RollCallTeacher.vue","mtime":1611227050000},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/babel-loader/lib/index.js","mtime":1615566678361},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvbGlhbmd6Zy96aXh1ZS9saXZlLWJyb2FkLWNhc3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBsYW5ndWFnZSBmcm9tICIuLi8uLi9sYW5ndWFnZS9tYWluIjsKdmFyIGF1dGggPSBCSlkuYXV0aDsKdmFyIGV2ZW50RW1pdHRlciA9IEJKWS5ldmVudEVtaXR0ZXI7CnZhciBST0xMX0NBTExfU1RBVFVTID0gewogIGJlZm9yZTogMCwKICBpbmc6IDEsCiAgYWZ0ZXI6IDIKfTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3JlZjsKCiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlLAogICAgICBzdGF0dXM6IDAsCiAgICAgIGlzVGVhY2hlcjogYXV0aC5pc1RlYWNoZXIoKSwKICAgICAgcmVzdWx0VGltZXI6IDYwLAogICAgICBuZXh0VGltZXI6IDYwLAogICAgICByZXN1bHQ6ICIiLAogICAgICByb2xsQ2FsbER1cmF0aW9uOiA2MCwKICAgICAgdmlzaWJsZTogZmFsc2UKICAgIH0sIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAic3RhdHVzIiwgUk9MTF9DQUxMX1NUQVRVUy5iZWZvcmUpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInN0YXR1c01hcCIsIFJPTExfQ0FMTF9TVEFUVVMpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInJlc3VsdEludGVydmFsIiwgbnVsbCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiYWNrQ291bnQiLCAwKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJuYWNrQ291bnQiLCAwKSwgX3JlZjsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGV2ZW50RW1pdHRlci5vbigidG9nZ2xlX3JvbGxfY2FsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2hvdygpOwogICAgfSkub24oIC8vIOeCueWQjee7k+aenAogICAgZXZlbnRFbWl0dGVyLlJPTExfQ0FMTF9SRVNVTFQsIGZ1bmN0aW9uIChlLCBkYXRhKSB7CiAgICAgIHZhciByZXN1bHQgPSBkYXRhOyAvLyAg54K55ZCN57uT5p6cIAoKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgX3RoaXMuc3RhdHVzID0gUk9MTF9DQUxMX1NUQVRVUy5hZnRlcjsKICAgICAgX3RoaXMuYWNrQ291bnQgPSByZXN1bHQuYWNrTGlzdC5sZW5ndGg7CiAgICAgIF90aGlzLm5hY2tDb3VudCA9IHJlc3VsdC5uYWNrTGlzdC5sZW5ndGg7CiAgICB9KS5vbiggLy8g54K55ZCN5byA5aeLCiAgICBldmVudEVtaXR0ZXIuUk9MTF9DQUxMLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnJlc3VsdFRpbWVyID0gX3RoaXMucm9sbENhbGxEdXJhdGlvbjsKICAgICAgX3RoaXMuc3RhdHVzID0gUk9MTF9DQUxMX1NUQVRVUy5pbmc7CiAgICAgIF90aGlzLnJlc3VsdEludGVydmFsID0gbnVsbDsKICAgICAgX3RoaXMucmVzdWx0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLnJlc3VsdFRpbWVyID4gMCkgewogICAgICAgICAgLS1fdGhpcy5yZXN1bHRUaW1lcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5pe26Ze05Yiw5LqG6ZyA6KaB6ICB5biI56uv5Li75Yqo6Kem5Y+R57uT5p2fCiAgICAgICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcihldmVudEVtaXR0ZXIuUk9MTF9DQUxMX0ZJTklTSCk7CiAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzLnJlc3VsdEludGVydmFsKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgc3RhcnRSb2xsQ2FsbDogZnVuY3Rpb24gc3RhcnRSb2xsQ2FsbCgpIHsKICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoZXZlbnRFbWl0dGVyLlJPTExfQ0FMTF9UUklHR0VSLCB7CiAgICAgICAgLy8g5YCS6K6h5pe2IOenkgogICAgICAgIGR1cmF0aW9uOiB0aGlzLnJvbGxDYWxsRHVyYXRpb24KICAgICAgfSk7CiAgICB9LAogICAgcmVDYWxsOiBmdW5jdGlvbiByZUNhbGwoKSB7CiAgICAgIHRoaXMuc3RhdHVzID0gUk9MTF9DQUxMX1NUQVRVUy5iZWZvcmU7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkge30KfTs="},{"version":3,"sources":["RollCallTeacher.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,OAAA,QAAA,MAAA,qBAAA;AAEA,IAAA,IAAA,GAAA,GAAA,CAAA,IAAA;AACA,IAAA,YAAA,GAAA,GAAA,CAAA,YAAA;AAEA,IAAA,gBAAA,GAAA;AACA,EAAA,MAAA,EAAA,CADA;AAEA,EAAA,GAAA,EAAA,CAFA;AAGA,EAAA,KAAA,EAAA;AAHA,CAAA;AAMA,eAAA;AACA,EAAA,IADA,kBACA;AAAA;;AACA;AACA,MAAA,QAAA,EAAA,QADA;AAEA,MAAA,MAAA,EAAA,CAFA;AAGA,MAAA,SAAA,EAAA,IAAA,CAAA,SAAA,EAHA;AAIA,MAAA,WAAA,EAAA,EAJA;AAKA,MAAA,SAAA,EAAA,EALA;AAMA,MAAA,MAAA,EAAA,EANA;AAOA,MAAA,gBAAA,EAAA,EAPA;AAQA,MAAA,OAAA,EAAA;AARA,uCASA,gBAAA,CAAA,MATA,sCAUA,gBAVA,2CAWA,IAXA,qCAYA,CAZA,sCAaA,CAbA;AAeA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AAAA;;AACA,IAAA,YAAA,CACA,EADA,CACA,kBADA,EACA,YAAA;AACA,MAAA,KAAA,CAAA,IAAA;AACA,KAHA,EAIA,EAJA,EAKA;AACA,IAAA,YAAA,CAAA,gBANA,EAOA,UAAA,CAAA,EAAA,IAAA,EAAA;AACA,UAAA,MAAA,GAAA,IAAA,CADA,CAEA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,KAAA;AAEA,MAAA,KAAA,CAAA,QAAA,GAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,KAfA,EAiBA,EAjBA,EAkBA;AACA,IAAA,YAAA,CAAA,SAnBA,EAoBA,YAAA;AACA,MAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,gBAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,GAAA;AACA,MAAA,KAAA,CAAA,cAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA,cAAA,GAAA,WAAA,CAAA,YAAA;AACA,YAAA,KAAA,CAAA,WAAA,GAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,WAAA;AACA,SAFA,MAEA;AACA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,gBAAA;AACA,UAAA,aAAA,CAAA,KAAA,CAAA,cAAA,CAAA;AACA;AACA,OARA,EAQA,IARA,CAAA;AASA,KAjCA;AAmCA,GAtDA;AAuDA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,KAJA,mBAIA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,KANA;AAOA,IAAA,aAPA,2BAOA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,iBAAA,EAAA;AACA;AACA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,KAZA;AAaA,IAAA,MAbA,oBAaA;AACA,WAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA;AAfA,GAvDA;AAwEA,EAAA,aAxEA,2BAwEA,CAAA;AAxEA,CAAA","sourcesContent":["<!-- 点名组件实现： 点名没有独立的组件来实现，我们提供了一套事件驱动的点名系统 -->\n\n<template>\n  <div v-show=\"visible\" id=\"roll-call-dialog\" class=\"teacher\">\n    <div v-show=\"status === statusMap.before\" class=\"before-roll-call\">\n      <p>\n        请设置学生需要在\n        <input v-model=\"rollCallDuration\" type=\"number\" />\n        秒内响应\n      </p>\n      <div @click=\"startRollCall\" class=\"btn start-btn\">发起点名</div>\n    </div>\n\n    <div v-show=\"status === statusMap.ing\" class=\"roll-call-ing\">学生正在陆续答到中，{{ resultTimer }}秒后可查看点名结果，请稍后</div>\n\n    <div v-show=\"status === statusMap.after\" class=\"after-roll-call\">\n      <p class=\"result\">答到情况：答到{{ ackCount }}人，未答到{{ nackCount }}人</p>\n      <div class=\"btn\" @click=\"reCall\">再次点名</div>\n    </div>\n\n    <div class=\"btn-close\" @click=\"close\">X</div>\n  </div>\n</template>\n\n<script>\nimport language from \"../../language/main\";\n\nconst auth = BJY.auth;\nconst eventEmitter = BJY.eventEmitter;\n\nconst ROLL_CALL_STATUS = {\n    before: 0,\n    ing: 1,\n    after: 2\n}\n\nexport default {\n  data() {\n    return {\n      language: language,\n      status: 0,\n      isTeacher: auth.isTeacher(),\n      resultTimer: 60,\n      nextTimer: 60,\n      result: \"\",\n      rollCallDuration: 60,\n      visible: false,\n      status: ROLL_CALL_STATUS.before,\n      statusMap: ROLL_CALL_STATUS,\n      resultInterval: null,\n      ackCount: 0, // 答到人数\n      nackCount: 0, // 未答到人数\n    };\n  },\n  created() {\n    eventEmitter\n      .on(\"toggle_roll_call\", () => {\n        this.show();\n      })\n      .on(\n        // 点名结果\n        eventEmitter.ROLL_CALL_RESULT,\n        (e, data) => {\n          var result = data;\n        //  点名结果 \n          console.log(result);\n          this.status = ROLL_CALL_STATUS.after\n\n          this.ackCount = result.ackList.length\n          this.nackCount = result.nackList.length\n        }\n      )\n      .on(\n        // 点名开始\n        eventEmitter.ROLL_CALL,\n        () => {\n            this.resultTimer = this.rollCallDuration\n            this.status = ROLL_CALL_STATUS.ing\n            this.resultInterval = null\n            this.resultInterval = setInterval(() => {\n                if (this.resultTimer > 0) {\n                    --this.resultTimer;\n                } else {\n                    // 时间到了需要老师端主动触发结束\n                    eventEmitter.trigger(eventEmitter.ROLL_CALL_FINISH);\n                    clearInterval(this.resultInterval)\n                }\n            }, 1000);\n        }\n      );\n  },\n  methods: {\n    show() {\n      this.visible = true;\n    },\n    close() {\n      this.visible = false;\n    },\n    startRollCall() {\n      eventEmitter.trigger(eventEmitter.ROLL_CALL_TRIGGER, {\n        // 倒计时 秒\n        duration: this.rollCallDuration,\n      });\n    },\n    reCall() {\n        this.status = ROLL_CALL_STATUS.before\n    }\n  },\n  beforeDestroy() {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#roll-call-dialog {\n  background: #fff;\n  padding: 24px;\n  font-size: 14px;\n\n  & > div {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .btn-close {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    cursor: pointer;\n  }\n\n  .before-roll-call {\n  }\n\n  .roll-call-ing {\n  }\n\n  .after-roll-call {\n  }\n\n  .btn {\n    margin: 20px auto;\n    background: #1795ff;\n    height: 40px;\n    line-height: 40px;\n    padding: 0 20px;\n    cursor: pointer;\n    color: #fff;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ModalPanel"}]}