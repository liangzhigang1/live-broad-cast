{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js!/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/ModalPanel/Quiz.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/ModalPanel/Quiz.vue","mtime":1611227050000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIGV2ZW50RW1pdHRlciA9IEJKWS5ldmVudEVtaXR0ZXI7CnZhciBhdXRoID0gQkpZLmF1dGg7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGlzVGVhY2hlcjogYXV0aC5pc1RlYWNoZXIoKSwKICAgICAgZm9yY2VKb2luOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICFfdGhpcy5pc1RlYWNoZXIgJiYgQkpZLnF1aXpTdHVkZW50Lm9wZW4oewogICAgICAgICAgLy8g5Y2g5L2N5YWD57SgCiAgICAgICAgICBlbGVtZW50OiAkKCIjcXVpei1wbGFjZWhvbGRlciAucGxhY2Vob2xkZXIiKVswXSwKICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgICAgLy8g5piv5ZCm5by65Yi25Y+C5YqgIOWtpueUn+err+etlOmimOaXtuS8oOWFpQogICAgICAgICAgZm9yY2VKb2luOiBkYXRhLmZvcmNlSm9pbiwKICAgICAgICAgIC8vIOivleWNt2lkCiAgICAgICAgICBxdWl6SWQ6IGRhdGEucXVpeklkLAogICAgICAgICAgLy8g6K+V6aKY562U5qGIIOWtpueUn+err+afpeeci+etlOahiOaXtuS8oOWFpQogICAgICAgICAgc29sdXRpb246IGRhdGEuc29sdXRpb24sCiAgICAgICAgICAvLyDlsLHnu6rlm57osIMKICAgICAgICAgIG9uUmVhZHk6IGZ1bmN0aW9uIG9uUmVhZHkoKSB7fSwKICAgICAgICAgIC8vIOmUmeivr+WbnuiwgwogICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHt9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgaW5pdFRlYWNoZXI6IGZ1bmN0aW9uIGluaXRUZWFjaGVyKCkgewogICAgICBCSlkucXVpelRlYWNoZXIuaW5pdCh7CiAgICAgICAgZWxlbWVudDogJCgiI3F1aXotcGxhY2Vob2xkZXIgLnBsYWNlaG9sZGVyIilbMF0sCiAgICAgICAgcmVwbGFjZTogZmFsc2UsCiAgICAgICAgLy8g6ZSZ6K+v5Zue6LCDCiAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcihkYXRhKSB7CiAgICAgICAgICBhbGVydChkYXRhLm1zZyk7CiAgICAgICAgfSwKICAgICAgICAvLyDlvIDlp4vlsI/mtYvliY3lm57osIPvvIzov5Tlm54gdHJ1ZSDkvJrlvIDlp4vmiafooYzlsI/mtYvvvIzov5Tlm55mYWxzZeS4jeS8muaJp+ihjO+8jOWPr+eUqOS6juadoeS7tuWIpOaWrQogICAgICAgIG9uQmVmb3JlU3RhcnRRdWl6OiBmdW5jdGlvbiBvbkJlZm9yZVN0YXJ0UXVpeigpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0sCiAgICAgICAgLy8g5byA5aeL5Y+R5biD6K+V5Y235YmN5Zue6LCD77yM6L+U5ZueIHRydWUg5Lya5omn6KGM5Y+R5biD77yM6L+U5ZueZmFsc2XkuI3kvJrmiafooYzvvIzlj6/nlKjkuo7mnaHku7bliKTmlq0KICAgICAgICBvbkJlZm9yZVB1Ymxpc2hTb2x1dGlvbjogZnVuY3Rpb24gb25CZWZvcmVQdWJsaXNoU29sdXRpb24oKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIG9uQmVmb3JlUXVpekRlbGV0ZTogZnVuY3Rpb24gb25CZWZvcmVRdWl6RGVsZXRlKCkgewogICAgICAgICAgdmFyIHByb21pc2UgPSAkLkRlZmVycmVkKCk7CiAgICAgICAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOWQl++8nycpOwoKICAgICAgICAgIGlmIChzdXJlKSB7CiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSh0cnVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpbml0U3R1ZGVudDogZnVuY3Rpb24gaW5pdFN0dWRlbnQoKSB7CiAgICAgIEJKWS5xdWl6U3R1ZGVudC5pbml0KCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgZXZlbnRFbWl0dGVyLm9uKCAvLyDlsI/mtYvlvIDlp4vkuovku7YKICAgIGV2ZW50RW1pdHRlci5RVUlaX1NUQVJULCBmdW5jdGlvbiAoZSwgZGF0YSkgewogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgX3RoaXMyLmZvcmNlSm9pbiA9IGRhdGEuZm9yY2VKb2luOwoKICAgICAgX3RoaXMyLm9wZW4oZGF0YSk7CiAgICB9KSAvLyDmtYvpqoznu5PmnZ8KICAgIC5vbihldmVudEVtaXR0ZXIuUVVJWl9FTkQsIGZ1bmN0aW9uIChlLCBkYXRhKSB7CiAgICAgICFfdGhpczIuaXNUZWFjaGVyICYmIF90aGlzMi5jbG9zZSgpOwogICAgfSkub24oZXZlbnRFbWl0dGVyLlFVSVpfQ0xPU0UsIGZ1bmN0aW9uIChlLCBkYXRhKSB7CiAgICAgIGlmICghZGF0YS5mb3JjZSAmJiAkLmlzRW1wdHlPYmplY3QoZGF0YS5zb2x1dGlvbikpIHsKICAgICAgICBhbGVydCgn6K+36Iez5bCR5Zue562U5LiA5Liq6aKY55uu5LmL5ZCO5o+Q5LqkJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfdGhpczIuY2xvc2UoKTsKICAgIH0pLm9uKCAvLyDmn6XnnIvlsI/mtYvnrZTmoYgKICAgIGV2ZW50RW1pdHRlci5RVUlaX1NPTFVUSU9OLCBmdW5jdGlvbiAoZSwgZGF0YSkgewogICAgICBfdGhpczIuZm9yY2VKb2luID0gZmFsc2U7CgogICAgICBfdGhpczIub3BlbihkYXRhKTsKICAgIH0pLm9uKGV2ZW50RW1pdHRlci5RVUlaX1NVQk1JVCwgZnVuY3Rpb24gKGUsIGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICBfdGhpczIuY2xvc2UoKTsKICAgIH0pLm9uKCJ0b2dnbGVfcXVpel9kaWFsb2ciLCBmdW5jdGlvbiAoZSwgZGF0YSkgewogICAgICBfdGhpczIudmlzaWJsZSA/IF90aGlzMi5jbG9zZSgpIDogX3RoaXMyLm9wZW4oKTsKICAgIH0pOwogICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoZXZlbnRFbWl0dGVyLlFVSVpfUkVRKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmlzVGVhY2hlciA/IHRoaXMuaW5pdFRlYWNoZXIoKSA6IHRoaXMuaW5pdFN0dWRlbnQoKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7fQp9Ow=="},{"version":3,"sources":["Quiz.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 小测组件 -->\n<template>\n  <div v-show=\"visible\" :class=\"isTeacher ? 'teacher' : 'student'\" id=\"quiz-placeholder\">\n    <div class=\"close-bar\">\n      <span v-show=\"isTeacher || !forceJoin\" @click=\"close\" class=\"bjy-close\">X</span>\n    </div>\n    <div class=\"placeholder\"></div>\n  </div>\n</template>\n\n<script>\nconst eventEmitter = BJY.eventEmitter;\nconst auth = BJY.auth;\n\nexport default {\n  data() {\n    return {\n      visible: false,\n      isTeacher: auth.isTeacher(),\n      forceJoin: false\n    };\n  },\n  methods: {\n    open(data) {\n      this.visible = true;\n      this.$nextTick(() => {\n        !this.isTeacher &&\n          BJY.quizStudent.open({\n            // 占位元素\n            element: $(\"#quiz-placeholder .placeholder\")[0],\n            replace: false,\n            // 是否强制参加 学生端答题时传入\n            forceJoin: data.forceJoin,\n            // 试卷id\n            quizId: data.quizId,\n            // 试题答案 学生端查看答案时传入\n            solution: data.solution,\n\n            // 就绪回调\n            onReady: function () {},\n            // 错误回调\n            onError: function () {},\n          });\n      });\n    },\n    close() {\n      this.visible = false;\n    },\n    initTeacher() {\n      BJY.quizTeacher.init({\n        element: $(\"#quiz-placeholder .placeholder\")[0],\n        replace: false,\n        // 错误回调\n        onError: function (data) {\n          alert(data.msg);\n        },\n        // 开始小测前回调，返回 true 会开始执行小测，返回false不会执行，可用于条件判断\n        onBeforeStartQuiz: function () {\n          return true;\n        },\n        // 开始发布试卷前回调，返回 true 会执行发布，返回false不会执行，可用于条件判断\n        onBeforePublishSolution: function () {\n          return true;\n        },\n        onBeforeQuizDelete: function () {\n            var promise = $.Deferred();\n            var sure = confirm('确定要删除吗？');\n            if (sure) {\n              promise.resolve(true);\n            } else {\n              promise.resolve(false);\n            }\n            return promise\n        },\n      });\n    },\n    initStudent() {\n      BJY.quizStudent.init();\n    },\n  },\n  created() {\n    eventEmitter\n      .on(\n        // 小测开始事件\n        eventEmitter.QUIZ_START,\n        (e, data) => {\n          console.log(data);\n          this.forceJoin = data.forceJoin;\n          this.open(data);\n        }\n      )\n      // 测验结束\n      .on(eventEmitter.QUIZ_END, (e, data) => {\n        !this.isTeacher && this.close();\n      })\n      .on(eventEmitter.QUIZ_CLOSE, (e, data) => {\n        if (!data.force && $.isEmptyObject(data.solution)) {\n            alert('请至少回答一个题目之后提交');\n            return;\n        }\n        this.close();\n      })\n      .on(\n        // 查看小测答案\n        eventEmitter.QUIZ_SOLUTION,\n        (e, data) => {\n          this.forceJoin = false;\n          this.open(data);\n        }\n      )\n      .on(eventEmitter.QUIZ_SUBMIT, (e, data) => {\n        console.log(data);\n        this.close();\n      })\n      .on(\"toggle_quiz_dialog\", (e, data) => {\n        this.visible ? this.close() : this.open();\n      });\n    eventEmitter.trigger(eventEmitter.QUIZ_REQ);\n  },\n  mounted() {\n    this.isTeacher ? this.initTeacher() : this.initStudent();\n  },\n  beforeDestroy() {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#quiz-placeholder {\n  position: absolute;\n  z-index: 10;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);\n  background: #fff;\n\n  &.student {\n    width: 600px;\n    height: 80%;\n\n    .close-bar {\n      position: absolute;\n      width: 100%;\n      top: 0;\n    }\n    .placeholder {\n      top: 30px;\n      bottom: 0;\n      position: absolute;\n      width: 100%;\n    }\n  }\n  &.teacher {\n    width: 800px;\n  }\n\n  .close-bar {\n    background: #232323;\n    height: 30px;\n    text-align: right;\n\n    .bjy-close {\n      line-height: 30px;\n      color: #fff;\n      font-size: 20px;\n      margin-right: 16px;\n      cursor: pointer;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ModalPanel"}]}