{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/InteractionPanel/MessageList.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/InteractionPanel/MessageList.vue","mtime":1615575708643},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/css-loader/dist/cjs.js","mtime":1592792512947},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1615566687412},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/postcss-loader/src/index.js","mtime":1584009011273},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/sass-loader/dist/cjs.js","mtime":1615566691505},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLy9AaW1wb3J0IHVybCgpOyDlvJXlhaXlhazlhbFjc3PnsbsKI21lc3NhZ2UtcGFuZWwgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKCiAgLm5vdGljZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICB6LWluZGV4OiAxOwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIHdpZHRoOiAxMDAlOwogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkZGQ7CiAgfQoKICAuYmp5LW1lc3NhZ2UtbGlzdCB7CiAgICBib3R0b206IDExMHB4OwogICAgaGVpZ2h0OiB1bnNldDsKICAgIHRvcDogMzJweDsKICB9CgogIC5ianktbWVzc2FnZS1zZW5kZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAxMHB4OwogICAgd2lkdGg6IDEwMCU7CiAgfQp9Cg=="},{"version":3,"sources":["MessageList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"MessageList.vue","sourceRoot":"src/components/InteractionPanel","sourcesContent":["<template>\n  <div id=\"message-panel\">\n    <div class=\"notice\">\n    </div>\n    <div class=\"message-list\">\n    </div>\n    <div class=\"message-sender\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport userRoleMap from './common/roleMap'\nconst auth = BJY.auth;\nconst store = BJY.store;\nconst eventEmitter = BJY.eventEmitter;\n\nexport default {\n  data () {\n    return {}\n  },\n  methods: {},\n  created () {\n    // 收到新消息时tab栏对应tab给出提示\n    eventEmitter.on(\n      eventEmitter.MESSAGE_RECEIVE,\n      function (e, date) {\n        var element = $('#btn-message-list')\n        if (!element.hasClass('active')) {\n          element.addClass('has-new')\n        }\n      }\n    )\n  },\n  mounted () {\n    // 公告\n    BJY.Notice.create({\n      element: $('#message-panel .notice'), // 父容器\n      replace: false,\n      defaultContent: '这里空空如也...', // 默认无公告时显示文本\n      maxLength: 140, // 公告文本最大长度\n      contentPlaceholder: '请输入公告正文内容', // 公告文本编辑框提示\n      linkPlaceholder: '请输入公告跳转链接（可选）', // 公告链接编辑框提示\n      linkErrorHint: 'URL 格式错误', // url 错误提示\n      canEdit: auth.isTeacher() || auth.isAssistant()\n    })\n    // 创建消息列表组件\n    BJY.MessageList.create({\n      element: $('#message-panel .message-list'),\n      renderEmoji: function (name, url) {\n        if (BJY.isAlicloudImage(url)) {\n          return '<img ondragstart=\"return false\" src=\"' +\n                        (url + '@100w_1e_1l.png') +\n                        '\" srcset=\"' +\n                        (url + '@200w_1e_1l.png') +\n                        ' 2x\">'\n        }\n        return '<img ondragstart=\"return false\" src=\"' + url + '\">'\n      },\n      renderImage: function (url) {\n        if (BJY.isAlicloudImage(url)) {\n          return '<img ondragstart=\"return false\" src=\"' +\n                        (url + '@100w_1e_1l.png') +\n                        '\" srcset=\"' +\n                        (url + '@200w_1e_1l.png') +\n                        ' 2x\">'\n        }\n        return '<img ondragstart=\"return false\" src=\"' + url + '\">'\n      },\n      renderUser: function (user, width, height) {\n        return {\n          id: user.id,\n          name: user.name,\n          number: user.number,\n          // 头像需压缩\n          avatar: BJY.compressImage({\n            url: user.avatar,\n            width: width,\n            height: height\n          }),\n          avatar2x: BJY.compressImage({\n            url: user.avatar,\n            width: width * 2,\n            height: height * 2\n          }),\n          // 根据用户类型，配置角色的英文和本地语言\n          role: userRoleMap[user.type].en,\n          localRole: userRoleMap[user.type].cn,\n          type: user.type\n        }\n      },\n      loadDistance: 0\n    })\n    // 创建消息发送组件\n    BJY.MessageSender.create({\n      element: $('#message-panel .message-sender'),\n      canSendEmoji: true,\n      canSendImage: true,\n      multiline: true,\n      messageMaxLength: 140,\n      placeholder: '请输入...',\n      emotionList: {\n        emotionPerRow: 6,\n        rowPerPage: 4\n      },\n      imageUploader: {\n          action: '/web/doc/uploadChatFile',\n          data: {\n            room_id: store.get('class.id'),\n            token: store.get('token')\n          },\n          fileName: 'Filedata'\n      },\n    })\n  },\n  beforeDestroy () {}\n}\n</script>\n\n<style lang='scss'>\n//@import url(); 引入公共css类\n#message-panel {\n  width: 100%;\n  height: 100%;\n\n  .notice {\n    position: absolute;\n    top: 0;\n    z-index: 1;\n    background: #fff;\n    width: 100%;\n    border-top: 1px solid #ddd;\n  }\n\n  .bjy-message-list {\n    bottom: 110px;\n    height: unset;\n    top: 32px;\n  }\n\n  .bjy-message-sender {\n    position: absolute;\n    bottom: 10px;\n    width: 100%;\n  }\n}\n</style>\n"]}]}