{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/SelfPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/SelfPlayer.vue","mtime":1611227050000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmxldCBzdG9yZSA9IEJKWS5zdG9yZTsKbGV0IGV2ZW50RW1pdHRlciA9IEJKWS5ldmVudEVtaXR0ZXI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGxheWVyOiBudWxsLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgLy8g5Yib5bu66Ieq5bex55qE5pKt5pS+5ZmoCiAgICBjcmVhdGVNeVBsYXllcihlbGVtZW50KSB7CiAgICAgIHRoaXMucGxheWVyID0gQkpZLkRlZmF1bHRUaGVtZVBsYXllci5jcmVhdGUoewogICAgICAgIGVsZW1lbnQ6ICQoIiNsaXZlLXNlbGYtcGxheWVyIiksCiAgICAgICAgcmVwbGFjZTogZmFsc2UsCiAgICAgICAgdXNlcjogc3RvcmUuZ2V0KCJ1c2VyIiksCiAgICAgICAgZXh0ZW5zaW9uOiBCSlkuZ2V0RXh0ZW5zaW9uKCksCiAgICAgICAgY2FuRm9sZDogdHJ1ZSwKICAgICAgICBjYW5Td2l0Y2hDYW1lcmE6IHRydWUsCiAgICAgICAgY2FuU3dpdGNoTWljOiB0cnVlLAogICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKGV2ZW50RW1pdHRlci5NRURJQV9TV0lUQ0hfVFJJR0dFUiwgewogICAgICAgICAgICB2aWRlb09uOiBmYWxzZSwKICAgICAgICAgICAgYXVkaW9PbjogZmFsc2UsCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkge30sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY3JlYXRlTXlQbGF5ZXIoKTsKICAgIGV2ZW50RW1pdHRlci5vbigKICAgICAgLy8g55uR5ZCs6Ieq5bex5pGE5YOP5aS05ZKM6bqm5YWL6aOO5Y+Y5YyWCiAgICAgIGV2ZW50RW1pdHRlci5NRURJQV9TV0lUQ0hfVFJJR0dFUiwKICAgICAgZnVuY3Rpb24gKGV2ZW50LCBkYXRhKSB7CiAgICAgICAgdmFyIHBsYXllciA9IEJKWS5QbGF5ZXIuaW5zdGFuY2VzW3N0b3JlLmdldCgidXNlci5pZCIpXTsKICAgICAgICBwbGF5ZXIgJiYgQkpZLnVzZXJQdWJsaXNoLnNldERldmljZShwbGF5ZXIsIGRhdGEudmlkZW9PbiwgZGF0YS5hdWRpb09uKTsKICAgICAgfQogICAgKTsKCiAgICAvLyDnm5HlkKzoh6rlt7Hmkq3mlL7lmajmmK/lkKbmipjlj6AKICAgIHRoaXMucGxheWVyICYmCiAgICAgIHRoaXMucGxheWVyLndhdGNoKCJpc0ZvbGRlZCIsIChpc0ZvbGRlZCkgPT4gewogICAgICAgIHZhciBlbGVtZW50ID0gJCgiLmxpdmUtc2VsZi1wbGF5ZXIiKTsKICAgICAgICBpZiAoaXNGb2xkZWQpIHsKICAgICAgICAgIC8vIOaJp+ihjOaKmOWPoAogICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygiaGlkZSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmiafooYzlsZXlvIAKICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoImhpZGUiKTsKICAgICAgICB9CiAgICAgIH0pOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHt9LAp9Owo="},{"version":3,"sources":["SelfPlayer.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelfPlayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"live-self-player\"></div>\n</template>\n\n<script>\nlet store = BJY.store;\nlet eventEmitter = BJY.eventEmitter;\nexport default {\n  components: {},\n  data() {\n    return {\n      player: null,\n    };\n  },\n  computed: {},\n  watch: {},\n  methods: {\n    // 创建自己的播放器\n    createMyPlayer(element) {\n      this.player = BJY.DefaultThemePlayer.create({\n        element: $(\"#live-self-player\"),\n        replace: false,\n        user: store.get(\"user\"),\n        extension: BJY.getExtension(),\n        canFold: true,\n        canSwitchCamera: true,\n        canSwitchMic: true,\n        onComplete: function () {\n          eventEmitter.trigger(eventEmitter.MEDIA_SWITCH_TRIGGER, {\n            videoOn: false,\n            audioOn: false,\n          });\n        },\n      });\n    },\n  },\n  created() {},\n  mounted() {\n    this.createMyPlayer();\n    eventEmitter.on(\n      // 监听自己摄像头和麦克风变化\n      eventEmitter.MEDIA_SWITCH_TRIGGER,\n      function (event, data) {\n        var player = BJY.Player.instances[store.get(\"user.id\")];\n        player && BJY.userPublish.setDevice(player, data.videoOn, data.audioOn);\n      }\n    );\n\n    // 监听自己播放器是否折叠\n    this.player &&\n      this.player.watch(\"isFolded\", (isFolded) => {\n        var element = $(\".live-self-player\");\n        if (isFolded) {\n          // 执行折叠\n          element.addClass(\"hide\");\n        } else {\n          // 执行展开\n          element.removeClass(\"hide\");\n        }\n      });\n  },\n  beforeDestroy() {},\n};\n</script>\n\n<style lang=\"scss\">\n//@import url(); 引入公共css类\n#live-self-player {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]}]}