{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/TeacherPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/TeacherPlayer.vue","mtime":1611227050000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmNvbnN0IHN0b3JlID0gQkpZLnN0b3JlOwpjb25zdCBhdXRoID0gQkpZLmF1dGg7CmNvbnN0IGV2ZW50RW1pdHRlciA9IEJKWS5ldmVudEVtaXR0ZXI7CmNvbnN0IHVzZXJEYXRhID0gQkpZLmRhdGEudXNlcjsKY29uc3QgY29uZmlnID0gQkpZLmNvbmZpZzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGxheWVyOiBudWxsLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5Yib5bu66ICB5biI5pKt5pS+5ZmoCiAgICBjcmVhdGVUZWFjaGVyUGxheWVyKGlzV2ViUlRDTWl4KSB7CiAgICAgIGlmIChpc1dlYlJUQ01peCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaXNXZWJSVENNaXggPSBhdXRoLmlzV2ViUlRDKCk7CiAgICAgIH0KICAgICAgaXNXZWJSVENNaXggJiYgKHN0b3JlLmdldCgnd2VicnRjTWl4VXNlcicpLm5hbWUgPSAn6ICB5biIJyk7CiAgICAgIHRoaXMucGxheWVyICYmIHRoaXMucGxheWVyLmRlc3Ryb3koKTsKICAgICAgdGhpcy5wbGF5ZXIgPSBudWxsOwogICAgICBjb25zdCB1c2VyID0gYXV0aC5pc1ByZXNlbnRlcigpCiAgICAgICAgPyBzdG9yZS5nZXQoInByZXNlbnRlciIpCiAgICAgICAgOiBpc1dlYlJUQ01peAogICAgICAgID8gc3RvcmUuZ2V0KCJ3ZWJydGNNaXhVc2VyIikKICAgICAgICA6IHN0b3JlLmdldCgicHJlc2VudGVyIikgfHwgc3RvcmUuZ2V0KCJ0ZWFjaGVyIik7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgICAgZWxlbWVudDogJCgiI2xpdmUtdGVhY2hlci1wbGF5ZXIiKSwKICAgICAgICByZXBsYWNlOiBmYWxzZSwKICAgICAgICB1c2VyOiB1c2VyLAogICAgICAgIGV4dGVuc2lvbjogQkpZLmdldEV4dGVuc2lvbigpLAogICAgICAgIGNhblN3aXRjaENhbWVyYTogYXV0aC5pc1NlbGYoc3RvcmUuZ2V0KCJ0ZWFjaGVyLmlkIikpLAogICAgICAgIGNhblN3aXRjaE1pYzogYXV0aC5pc1NlbGYoc3RvcmUuZ2V0KCJ0ZWFjaGVyLmlkIikpLAogICAgICAgIGZvb3Rlck9wdGlvbnM6IHsKICAgICAgICAgIG9uVG9nZ2xlQ2xpY2s6IHRoaXMucHB0VmlkZW9Td2l0Y2gsCiAgICAgICAgfSwKICAgICAgfTsKICAgICAgIWF1dGguaXNUZWFjaGVyKCkgJiYgKG9wdGlvbnMuaXNXZWJSVENNaXggPSBpc1dlYlJUQ01peCk7CiAgICAgIHRoaXMucGxheWVyID0gQkpZLkRlZmF1bHRUaGVtZVBsYXllci5jcmVhdGUob3B0aW9ucyk7CiAgICB9LAoKICAgIHN3YXAocHJlc2VudGVyQ2FtZXJhTm9kZSwgd2hpdGVib2FyZE5vZGUpIHsKICAgICAgdmFyIHByZXNlbnRlckNhbWVyYVBhcmVudE5vZGUgPSBwcmVzZW50ZXJDYW1lcmFOb2RlLnBhcmVudE5vZGU7CiAgICAgIHZhciB3aGl0ZWJvYXJkUGFyZW50Tm9kZSA9IHdoaXRlYm9hcmROb2RlLnBhcmVudE5vZGU7CiAgICAgIHZhciBwcmVzZW50ZXJDYW1lcmFQbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICB2YXIgd2hpdGVib2FyZFBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogICAgICBwcmVzZW50ZXJDYW1lcmFQYXJlbnROb2RlLmluc2VydEJlZm9yZSgKICAgICAgICBwcmVzZW50ZXJDYW1lcmFQbGFjZWhvbGRlciwKICAgICAgICBwcmVzZW50ZXJDYW1lcmFOb2RlCiAgICAgICk7CiAgICAgIHdoaXRlYm9hcmRQYXJlbnROb2RlLmluc2VydEJlZm9yZSh3aGl0ZWJvYXJkUGxhY2Vob2xkZXIsIHdoaXRlYm9hcmROb2RlKTsKCiAgICAgIHdoaXRlYm9hcmROb2RlICYmCiAgICAgICAgcHJlc2VudGVyQ2FtZXJhUGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoCiAgICAgICAgICB3aGl0ZWJvYXJkTm9kZSwKICAgICAgICAgIHByZXNlbnRlckNhbWVyYVBsYWNlaG9sZGVyCiAgICAgICAgKTsKICAgICAgcHJlc2VudGVyQ2FtZXJhTm9kZSAmJgogICAgICAgIHdoaXRlYm9hcmRQYXJlbnROb2RlLmluc2VydEJlZm9yZShwcmVzZW50ZXJDYW1lcmFOb2RlLCB3aGl0ZWJvYXJkUGxhY2Vob2xkZXIpOwoKICAgICAgcHJlc2VudGVyQ2FtZXJhUGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwcmVzZW50ZXJDYW1lcmFQbGFjZWhvbGRlcik7CiAgICAgIHdoaXRlYm9hcmRQYXJlbnROb2RlLnJlbW92ZUNoaWxkKHdoaXRlYm9hcmRQbGFjZWhvbGRlcik7CiAgICB9LAoKICAgIC8vIOWIh+aNonBwdOS4juS4u+iusuinhumikeS9jee9ru+8jOWmgumcgOWQjOatpeWIh+aNou+8jOWPr+mAmui/h+iHquWumuS5ieS/oeS7pOWunueOsAogICAgcHB0VmlkZW9Td2l0Y2goKSB7CiAgICAgIGNvbnN0IHByZXNlbnRlckRvbSA9ICQoIi5ianktcGxheWVyLXRoZW1lLWRlZmF1bHQiKVswXTsKICAgICAgY29uc3Qgd2hpdGVib2FyZERvbSA9ICQoIi5ianktd2hpdGVib2FyZCIpWzBdOwogICAgICB0aGlzLnN3YXAocHJlc2VudGVyRG9tLCB3aGl0ZWJvYXJkRG9tKTsKICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoZXZlbnRFbWl0dGVyLldJTkRPV19SRVNJWkUpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB2YXIgcGxheWVySW5zdGFuY2UgPSB0aGlzLnBsYXllcgogICAgZXZlbnRFbWl0dGVyCiAgICAgIC5vbihldmVudEVtaXR0ZXIuQ0xBU1NfU1RBUlQsIChldmVudCwgZGF0YSkgPT4gewogICAgICAgIHRoaXMuY3JlYXRlVGVhY2hlclBsYXllcigpOwogICAgICAgIC8vIOiuvue9ruS4gOS4i+WPkeiogOadg+mZkAogICAgICAgIGlmIChhdXRoLmlzVGVhY2hlcigpIHx8IGF1dGguaXNBc3Npc3RhbnQoKSkgewogICAgICAgICAgc3RvcmUuc2V0KCJjbGFzcy5zcGVha1N0YXRlIiwgY29uZmlnLlNQRUFLX1NUQVRFX0ZSRUUpOwogICAgICAgIH0KICAgICAgICAvLyDkuIror77lkI7ogIHluIjoh6rliqjlvIDlkK/pn7Pop4bpopEKICAgICAgICBpZiAoYXV0aC5pc1RlYWNoZXIoKSkgewogICAgICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoZXZlbnRFbWl0dGVyLk1FRElBX1NXSVRDSF9UUklHR0VSLCB7CiAgICAgICAgICAgIGF1ZGlvT246IHRydWUsCiAgICAgICAgICAgIHZpZGVvT246IHRydWUsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC5vbihldmVudEVtaXR0ZXIuTUVESUFfU1dJVENIX1RSSUdHRVIsIGZ1bmN0aW9uIChldmVudCwgZGF0YSkgewogICAgICAgIHZhciBwbGF5ZXIgPSBCSlkuUGxheWVyLmluc3RhbmNlc1tzdG9yZS5nZXQoInVzZXIuaWQiKV07CiAgICAgICAgcGxheWVyICYmIEJKWS51c2VyUHVibGlzaC5zZXREZXZpY2UocGxheWVyLCBkYXRhLnZpZGVvT24sIGRhdGEuYXVkaW9Pbik7CiAgICAgIH0pCiAgICAgIC5vbigKICAgICAgICAvLyDogIHluIjmiZPlvIDlqpLkvZPkuovku7YKICAgICAgICBldmVudEVtaXR0ZXIuVEVBQ0hFUl9NRURJQV9PTiwKICAgICAgICAoKSA9PiB7CiAgICAgICAgICAvLyDliKTmlq3mkq3mlL7lmajmmK/lkKblrZjlnKgKICAgICAgICAgIGlmICghdGhpcy5wbGF5ZXIpIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVUZWFjaGVyUGxheWVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApCiAgICAgIC5vbigKICAgICAgICBldmVudEVtaXR0ZXIuTUVESUFfU1RBVFVTX0NIQU5HRSwKICAgICAgICAoZSwgZGF0YSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZGF0YSkKICAgICAgICAgIGlmIChkYXRhLnZpZGVvT24pIHsKICAgICAgICAgICAgIWF1dGguaXNQcmVzZW50ZXIoKSAmJiB0aGlzLmNyZWF0ZVRlYWNoZXJQbGF5ZXIoZmFsc2UpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAhYXV0aC5pc1ByZXNlbnRlcigpICYmIHRoaXMuY3JlYXRlVGVhY2hlclBsYXllcih0cnVlKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKQogICAgICAub24oCiAgICAgICAgLy8g5Li75pKt5YWz6Zet5aqS5L2T5LqL5Lu2CiAgICAgICAgZXZlbnRFbWl0dGVyLlRFQUNIRVJfTUVESUFfT0ZGLAogICAgICAgICgpID0+IHsKICAgICAgICB9CiAgICAgICkKICAgICAgLm9uKAogICAgICAgIGV2ZW50RW1pdHRlci5DTEFTU1JPT01fQ09OTkVDVF9TVUNDRVNTLAogICAgICAgICgpID0+IHsKICAgICAgICAgIHRoaXMuY3JlYXRlVGVhY2hlclBsYXllcigpOwogICAgICAgIH0KICAgICAgKQogICAgLy8g55uR5ZCs5Li76K6y5Lq65YiH5o2iCiAgICAhYXV0aC5pc1RlYWNoZXIoKSAmJgogICAgICBzdG9yZS53YXRjaCgicHJlc2VudGVySWQiLCAobmV3UHJlc2VudGVySWQsIG9sZFByZXNlbnRlcklkKSA9PiB7CiAgICAgICAgdmFyIG5ld1ByZXNlbnRlciA9IHVzZXJEYXRhLmZpbmQobmV3UHJlc2VudGVySWQpOwogICAgICAgIHZhciBvbGRQcmVzZW50ZXIgPSB1c2VyRGF0YS5maW5kKG9sZFByZXNlbnRlcklkKTsKICAgICAgICAvLyDlhYjlpITnkIblj5HoqIDliJfooagKICAgICAgICBldmVudEVtaXR0ZXIuQUNUSVZFX0xJU1RfUFJFU0VOVEVSX0NIQU5HRV9UUklHR0VSID0KICAgICAgICAgICJhY3RpdmVfbGlzdF9wcmVzZW50ZXJfY2hhbmdlX3RyaWdnZXIiOwogICAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKGV2ZW50RW1pdHRlci5BQ1RJVkVfTElTVF9QUkVTRU5URVJfQ0hBTkdFX1RSSUdHRVIsIHsKICAgICAgICAgIG5ld1ByZXNlbnRlcjogbmV3UHJlc2VudGVyLAogICAgICAgICAgb2xkUHJlc2VudGVyOiBvbGRQcmVzZW50ZXIsCiAgICAgICAgfSk7CiAgICAgICAgLy8g5Li76K6y5pKt5pS+5Zmo6ZSA5q+B6YeN5bu677yMCiAgICAgICAgaWYgKG5ld1ByZXNlbnRlcikgewogICAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlVGVhY2hlclBsYXllcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgY29uc3QgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50CiAgICAvLyDlhajlsY8gZXNjIOmAgOWHuueahOmXrumimAogICAgaWYgKGRvYy5yZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAgICdmdWxsc2NyZWVuY2hhbmdlJywKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGlzRnVsbHNjcmVlbiA9IHBsYXllckluc3RhbmNlICYmIHBsYXllckluc3RhbmNlLmlzRnVsbFNjcmVlbgoKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuICE9IGlzRnVsbHNjcmVlbiAmJiAhZG9jdW1lbnQuZnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKAogICAgICAgICAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIuRlVMTFNDUkVFTl9FWElUX1RSSUdHRVIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0KICAgIGVsc2UgaWYgKGRvYy53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAgICd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGlzRnVsbHNjcmVlbiA9IHBsYXllckluc3RhbmNlICYmIHBsYXllckluc3RhbmNlLmlzRnVsbFNjcmVlbgoKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4gIT0gaXNGdWxsc2NyZWVuICYmICFkb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4pIHsKICAgICAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcigKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLkZVTExTQ1JFRU5fRVhJVF9UUklHR0VSCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9CiAgICBlbHNlIGlmIChkb2MubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKAogICAgICAgICAgICAnbW96ZnVsbHNjcmVlbmNoYW5nZScsCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBpc0Z1bGxzY3JlZW4gPSBwbGF5ZXJJbnN0YW5jZSAmJiBwbGF5ZXJJbnN0YW5jZS5pc0Z1bGxTY3JlZW4KCiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQubW96RnVsbFNjcmVlbiAhPSBpc0Z1bGxzY3JlZW4gJiYgIWRvY3VtZW50Lm1vekZ1bGxTY3JlZW4pIHsKICAgICAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcigKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLkZVTExTQ1JFRU5fRVhJVF9UUklHR0VSCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["TeacherPlayer.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeacherPlayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"live-teacher-player\"></div>\n</template>\n\n<script>\nconst store = BJY.store;\nconst auth = BJY.auth;\nconst eventEmitter = BJY.eventEmitter;\nconst userData = BJY.data.user;\nconst config = BJY.config;\n\nexport default {\n  components: {},\n  data() {\n    return {\n      player: null,\n    };\n  },\n  methods: {\n    //创建老师播放器\n    createTeacherPlayer(isWebRTCMix) {\n      if (isWebRTCMix === undefined) {\n        isWebRTCMix = auth.isWebRTC();\n      }\n      isWebRTCMix && (store.get('webrtcMixUser').name = '老师');\n      this.player && this.player.destroy();\n      this.player = null;\n      const user = auth.isPresenter()\n        ? store.get(\"presenter\")\n        : isWebRTCMix\n        ? store.get(\"webrtcMixUser\")\n        : store.get(\"presenter\") || store.get(\"teacher\");\n      const options = {\n        element: $(\"#live-teacher-player\"),\n        replace: false,\n        user: user,\n        extension: BJY.getExtension(),\n        canSwitchCamera: auth.isSelf(store.get(\"teacher.id\")),\n        canSwitchMic: auth.isSelf(store.get(\"teacher.id\")),\n        footerOptions: {\n          onToggleClick: this.pptVideoSwitch,\n        },\n      };\n      !auth.isTeacher() && (options.isWebRTCMix = isWebRTCMix);\n      this.player = BJY.DefaultThemePlayer.create(options);\n    },\n\n    swap(presenterCameraNode, whiteboardNode) {\n      var presenterCameraParentNode = presenterCameraNode.parentNode;\n      var whiteboardParentNode = whiteboardNode.parentNode;\n      var presenterCameraPlaceholder = document.createElement(\"div\");\n      var whiteboardPlaceholder = document.createElement(\"div\");\n\n      presenterCameraParentNode.insertBefore(\n        presenterCameraPlaceholder,\n        presenterCameraNode\n      );\n      whiteboardParentNode.insertBefore(whiteboardPlaceholder, whiteboardNode);\n\n      whiteboardNode &&\n        presenterCameraParentNode.insertBefore(\n          whiteboardNode,\n          presenterCameraPlaceholder\n        );\n      presenterCameraNode &&\n        whiteboardParentNode.insertBefore(presenterCameraNode, whiteboardPlaceholder);\n\n      presenterCameraParentNode.removeChild(presenterCameraPlaceholder);\n      whiteboardParentNode.removeChild(whiteboardPlaceholder);\n    },\n\n    // 切换ppt与主讲视频位置，如需同步切换，可通过自定义信令实现\n    pptVideoSwitch() {\n      const presenterDom = $(\".bjy-player-theme-default\")[0];\n      const whiteboardDom = $(\".bjy-whiteboard\")[0];\n      this.swap(presenterDom, whiteboardDom);\n      eventEmitter.trigger(eventEmitter.WINDOW_RESIZE);\n    },\n  },\n  created() {\n    var playerInstance = this.player\n    eventEmitter\n      .on(eventEmitter.CLASS_START, (event, data) => {\n        this.createTeacherPlayer();\n        // 设置一下发言权限\n        if (auth.isTeacher() || auth.isAssistant()) {\n          store.set(\"class.speakState\", config.SPEAK_STATE_FREE);\n        }\n        // 上课后老师自动开启音视频\n        if (auth.isTeacher()) {\n          eventEmitter.trigger(eventEmitter.MEDIA_SWITCH_TRIGGER, {\n            audioOn: true,\n            videoOn: true,\n          });\n        }\n      })\n      .on(eventEmitter.MEDIA_SWITCH_TRIGGER, function (event, data) {\n        var player = BJY.Player.instances[store.get(\"user.id\")];\n        player && BJY.userPublish.setDevice(player, data.videoOn, data.audioOn);\n      })\n      .on(\n        // 老师打开媒体事件\n        eventEmitter.TEACHER_MEDIA_ON,\n        () => {\n          // 判断播放器是否存在\n          if (!this.player) {\n            this.createTeacherPlayer();\n          }\n        }\n      )\n      .on(\n        eventEmitter.MEDIA_STATUS_CHANGE,\n        (e, data) => {\n          console.log(data)\n          if (data.videoOn) {\n            !auth.isPresenter() && this.createTeacherPlayer(false)\n          } else {\n            !auth.isPresenter() && this.createTeacherPlayer(true)\n          }\n        }\n      )\n      .on(\n        // 主播关闭媒体事件\n        eventEmitter.TEACHER_MEDIA_OFF,\n        () => {\n        }\n      )\n      .on(\n        eventEmitter.CLASSROOM_CONNECT_SUCCESS,\n        () => {\n          this.createTeacherPlayer();\n        }\n      )\n    // 监听主讲人切换\n    !auth.isTeacher() &&\n      store.watch(\"presenterId\", (newPresenterId, oldPresenterId) => {\n        var newPresenter = userData.find(newPresenterId);\n        var oldPresenter = userData.find(oldPresenterId);\n        // 先处理发言列表\n        eventEmitter.ACTIVE_LIST_PRESENTER_CHANGE_TRIGGER =\n          \"active_list_presenter_change_trigger\";\n        eventEmitter.trigger(eventEmitter.ACTIVE_LIST_PRESENTER_CHANGE_TRIGGER, {\n          newPresenter: newPresenter,\n          oldPresenter: oldPresenter,\n        });\n        // 主讲播放器销毁重建，\n        if (newPresenter) {\n          if (this.player) {\n            this.createTeacherPlayer();\n          }\n        }\n      });\n\n    const doc = document.documentElement\n    // 全屏 esc 退出的问题\n    if (doc.requestFullscreen) {\n        document.addEventListener(\n            'fullscreenchange',\n            function () {\n                var isFullscreen = playerInstance && playerInstance.isFullScreen\n\n                if (document.fullscreen != isFullscreen && !document.fullscreen) {\n                    eventEmitter.trigger(\n                        eventEmitter.FULLSCREEN_EXIT_TRIGGER\n                    );\n                }\n            }\n        );\n    }\n    else if (doc.webkitRequestFullScreen) {\n        document.addEventListener(\n            'webkitfullscreenchange',\n            function () {\n                var isFullscreen = playerInstance && playerInstance.isFullScreen\n\n                if (document.webkitIsFullScreen != isFullscreen && !document.webkitIsFullScreen) {\n                    eventEmitter.trigger(\n                        eventEmitter.FULLSCREEN_EXIT_TRIGGER\n                    );\n                }\n            }\n        );\n    }\n    else if (doc.mozRequestFullScreen) {\n        document.addEventListener(\n            'mozfullscreenchange',\n            function () {\n                var isFullscreen = playerInstance && playerInstance.isFullScreen\n\n                if (document.mozFullScreen != isFullscreen && !document.mozFullScreen) {\n                    eventEmitter.trigger(\n                        eventEmitter.FULLSCREEN_EXIT_TRIGGER\n                    );\n                }\n            }\n        );\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n#live-teacher-player {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n</style>\n"]}]}