{"remainingRequest":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/zixue/live-broad-cast/src/components/ModalPanel/Quiz.vue?vue&type=style&index=0&id=9565e4a6&lang=scss&scoped=true&","dependencies":[{"path":"/Users/liangzg/zixue/live-broad-cast/src/components/ModalPanel/Quiz.vue","mtime":1611227050000},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/css-loader/dist/cjs.js","mtime":1592792512947},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1615566687412},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/postcss-loader/src/index.js","mtime":1584009011273},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/sass-loader/dist/cjs.js","mtime":1615566691505},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNxdWl6LXBsYWNlaG9sZGVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgei1pbmRleDogMTA7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGJveC1zaGFkb3c6IDAgMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJhY2tncm91bmQ6ICNmZmY7CgogICYuc3R1ZGVudCB7CiAgICB3aWR0aDogNjAwcHg7CiAgICBoZWlnaHQ6IDgwJTsKCiAgICAuY2xvc2UtYmFyIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgdG9wOiAwOwogICAgfQogICAgLnBsYWNlaG9sZGVyIHsKICAgICAgdG9wOiAzMHB4OwogICAgICBib3R0b206IDA7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICB9CiAgfQogICYudGVhY2hlciB7CiAgICB3aWR0aDogODAwcHg7CiAgfQoKICAuY2xvc2UtYmFyIHsKICAgIGJhY2tncm91bmQ6ICMyMzIzMjM7CiAgICBoZWlnaHQ6IDMwcHg7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKCiAgICAuYmp5LWNsb3NlIHsKICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgICAgIGNvbG9yOiAjZmZmOwogICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgIG1hcmdpbi1yaWdodDogMTZweDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Quiz.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Quiz.vue","sourceRoot":"src/components/ModalPanel","sourcesContent":["<!-- 小测组件 -->\n<template>\n  <div v-show=\"visible\" :class=\"isTeacher ? 'teacher' : 'student'\" id=\"quiz-placeholder\">\n    <div class=\"close-bar\">\n      <span v-show=\"isTeacher || !forceJoin\" @click=\"close\" class=\"bjy-close\">X</span>\n    </div>\n    <div class=\"placeholder\"></div>\n  </div>\n</template>\n\n<script>\nconst eventEmitter = BJY.eventEmitter;\nconst auth = BJY.auth;\n\nexport default {\n  data() {\n    return {\n      visible: false,\n      isTeacher: auth.isTeacher(),\n      forceJoin: false\n    };\n  },\n  methods: {\n    open(data) {\n      this.visible = true;\n      this.$nextTick(() => {\n        !this.isTeacher &&\n          BJY.quizStudent.open({\n            // 占位元素\n            element: $(\"#quiz-placeholder .placeholder\")[0],\n            replace: false,\n            // 是否强制参加 学生端答题时传入\n            forceJoin: data.forceJoin,\n            // 试卷id\n            quizId: data.quizId,\n            // 试题答案 学生端查看答案时传入\n            solution: data.solution,\n\n            // 就绪回调\n            onReady: function () {},\n            // 错误回调\n            onError: function () {},\n          });\n      });\n    },\n    close() {\n      this.visible = false;\n    },\n    initTeacher() {\n      BJY.quizTeacher.init({\n        element: $(\"#quiz-placeholder .placeholder\")[0],\n        replace: false,\n        // 错误回调\n        onError: function (data) {\n          alert(data.msg);\n        },\n        // 开始小测前回调，返回 true 会开始执行小测，返回false不会执行，可用于条件判断\n        onBeforeStartQuiz: function () {\n          return true;\n        },\n        // 开始发布试卷前回调，返回 true 会执行发布，返回false不会执行，可用于条件判断\n        onBeforePublishSolution: function () {\n          return true;\n        },\n        onBeforeQuizDelete: function () {\n            var promise = $.Deferred();\n            var sure = confirm('确定要删除吗？');\n            if (sure) {\n              promise.resolve(true);\n            } else {\n              promise.resolve(false);\n            }\n            return promise\n        },\n      });\n    },\n    initStudent() {\n      BJY.quizStudent.init();\n    },\n  },\n  created() {\n    eventEmitter\n      .on(\n        // 小测开始事件\n        eventEmitter.QUIZ_START,\n        (e, data) => {\n          console.log(data);\n          this.forceJoin = data.forceJoin;\n          this.open(data);\n        }\n      )\n      // 测验结束\n      .on(eventEmitter.QUIZ_END, (e, data) => {\n        !this.isTeacher && this.close();\n      })\n      .on(eventEmitter.QUIZ_CLOSE, (e, data) => {\n        if (!data.force && $.isEmptyObject(data.solution)) {\n            alert('请至少回答一个题目之后提交');\n            return;\n        }\n        this.close();\n      })\n      .on(\n        // 查看小测答案\n        eventEmitter.QUIZ_SOLUTION,\n        (e, data) => {\n          this.forceJoin = false;\n          this.open(data);\n        }\n      )\n      .on(eventEmitter.QUIZ_SUBMIT, (e, data) => {\n        console.log(data);\n        this.close();\n      })\n      .on(\"toggle_quiz_dialog\", (e, data) => {\n        this.visible ? this.close() : this.open();\n      });\n    eventEmitter.trigger(eventEmitter.QUIZ_REQ);\n  },\n  mounted() {\n    this.isTeacher ? this.initTeacher() : this.initStudent();\n  },\n  beforeDestroy() {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#quiz-placeholder {\n  position: absolute;\n  z-index: 10;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);\n  background: #fff;\n\n  &.student {\n    width: 600px;\n    height: 80%;\n\n    .close-bar {\n      position: absolute;\n      width: 100%;\n      top: 0;\n    }\n    .placeholder {\n      top: 30px;\n      bottom: 0;\n      position: absolute;\n      width: 100%;\n    }\n  }\n  &.teacher {\n    width: 800px;\n  }\n\n  .close-bar {\n    background: #232323;\n    height: 30px;\n    text-align: right;\n\n    .bjy-close {\n      line-height: 30px;\n      color: #fff;\n      font-size: 20px;\n      margin-right: 16px;\n      cursor: pointer;\n    }\n  }\n}\n</style>\n"]}]}