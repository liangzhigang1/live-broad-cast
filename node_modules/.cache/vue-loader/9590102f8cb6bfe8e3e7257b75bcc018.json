{"remainingRequest":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/zixue/live-broad-cast/src/components/FunctionPanel/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/zixue/live-broad-cast/src/components/FunctionPanel/index.vue","mtime":1611227050000},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/babel-loader/lib/index.js","mtime":1615566678361},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/zixue/live-broad-cast/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBsYW5ndWFnZSBmcm9tICIuLi8uLi9sYW5ndWFnZS9tYWluIjsKaW1wb3J0IFNwZWFrQXBwbHlNZW51IGZyb20gIi4vU3BlYWtBcHBseU1lbnUiOwppbXBvcnQgU2hhcmVTY3JlZW5NZW51IGZyb20gIi4vU2hhcmVTY3JlZW5NZW51IjsKaW1wb3J0IFJlY29yZCBmcm9tICIuL1JlY29yZCI7CgpsZXQgc3RvcmUgPSBCSlkuc3RvcmU7CmxldCBldmVudEVtaXR0ZXIgPSBCSlkuZXZlbnRFbWl0dGVyOwpsZXQgYXV0aCA9IEJKWS5hdXRoOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNwZWFrQXBwbHlNZW51LAogICAgU2hhcmVTY3JlZW5NZW51LAogICAgUmVjb3JkLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1c1RpcDogIiIsCiAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZSwKICAgICAgaXNTdHVkZW50OiBhdXRoLmlzU3R1ZGVudCgpLAogICAgICBiYXJyYWdlOiBudWxsLAogICAgICBpc0JhcnJhZ2VPbjogZmFsc2UsCiAgICAgIGNkbkxpc3Q6IFtdLAogICAgICBjdXJyZW50Tm9kZTogMSwKICAgICAgY2FuU3dpdGNoQ2RuOiAhQkpZLmF1dGguaXNXZWJSVEMoKSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgYmFycmFnZVN0YXRlKCkgewogICAgICByZXR1cm4gdGhpcy5pc0JhcnJhZ2VPbiA/IGxhbmd1YWdlLkJBUlJBR0VfT04gOiBsYW5ndWFnZS5CQVJSQUdFX09GRjsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgY3VycmVudE5vZGUobmV3SW5kZXgsIG9sZEluZGV4KSB7CiAgICAgIGNvbnNvbGUubG9nKG5ld0luZGV4KTsKICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoZXZlbnRFbWl0dGVyLkRPV05MSU5LX1NFUlZFUl9OT0RFX0NIQU5HRV9UUklHR0VSLCB7CiAgICAgICAgaW5kZXg6IG5ld0luZGV4IC0gMSwKICAgICAgfSk7CiAgICB9LAogIH0sCiAgZmlsdGVyczogewogICAgY2RuTGlzdEZpbHRlcihpbmRleCkgewogICAgICByZXR1cm4gIue6v+i3ryIgKyBpbmRleDsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICB0b2dnbGVDbGFzc1N0YXJ0KCkgewogICAgICBpZiAoc3RvcmUuZ2V0KCJjbGFzcy5zdGFydGVkIikpIHsKICAgICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcihldmVudEVtaXR0ZXIuQ0xBU1NfRU5EX1RSSUdHRVIpOwogICAgICB9IGVsc2UgewogICAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKGV2ZW50RW1pdHRlci5DTEFTU19TVEFSVF9UUklHR0VSKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZUJhcnJhZ2UoKSB7CiAgICAgIGxldCBpc09wZW4gPSB0aGlzLmJhcnJhZ2UuaXNPcGVuZWQoKTsKICAgICAgaWYgKGlzT3BlbikgewogICAgICAgIHRoaXMuYmFycmFnZS5jbG9zZSgpOwogICAgICAgIHRoaXMuaXNCYXJyYWdlT24gPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJhcnJhZ2Uub3BlbigpOwogICAgICAgIHRoaXMuaXNCYXJyYWdlT24gPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlUXVpeigpIHsKICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoInRvZ2dsZV9xdWl6X2RpYWxvZyIpOwogICAgfSwKICAgIHRvZ2dsZUFuc3dlcigpIHsKICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoInRvZ2dsZV9hbnN3ZXJfZGlhbG9nIik7CiAgICB9LAogICAgdG9nZ2xlTWVkaWFQbGF5ZXIoKSB7CiAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKCJ0b2dnbGVfbWVkaWFfcGxheWVyIik7CiAgICB9LAogICAgdG9nZ2xlUm9sbENhbGwoKSB7CiAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKCJ0b2dnbGVfcm9sbF9jYWxsIik7CiAgICB9LAogICAgdG9nZ2xlTG90dGVyeSgpIHsKICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoInRvZ2dsZV9sb3R0ZXJ5Iik7CiAgICB9LAogICAgdG9nZ2xlQXR0ZW50aW9uRGV0ZWN0aW9uKCkgewogICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcigidG9nZ2xlX2F0dGVudGlvbl9kZXRlY3Rpb24iKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgc3RvcmUud2F0Y2goCiAgICAgICJjbGFzcy5zdGFydGVkIiwKICAgICAgKHN0YXJ0ZWQpID0+IHsKICAgICAgICBpZiAoc3RhcnRlZCkgewogICAgICAgICAgdGhpcy5zdGF0dXNUaXAgPSBsYW5ndWFnZS5DTEFTU19FTkQ7CiAgICAgICAgICB0aGlzLiRUb2FzdChsYW5ndWFnZS5USVBfQ0xBU1NfU1RBUlQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN0YXR1c1RpcCA9IGxhbmd1YWdlLkNMQVNTX1NUQVJUOwogICAgICAgICAgdGhpcy4kVG9hc3QobGFuZ3VhZ2UuVElQX0NMQVNTX0VORCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuc3RhcnRlZCA9IHN0YXJ0ZWQ7CiAgICAgIH0sCiAgICAgIHRydWUKICAgICk7CiAgICAvLyDojrflj5Zr5Y+v55So55qEY2Ru6IqC54K5CiAgICB0aGlzLmNkbkxpc3QgPSBCSlkuZGF0YS5zZXJ2ZXIuZ2V0TGl2ZVNlcnZlckxpc3QoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDosIPnlKggY3JlYXRlIOaWueazleWIm+W7uuW8ueW5lee7hOS7tgogICAgLy8g5by55bmV57uE5Lu25LiN6ZyA6KaB54us56uL55qE5a655Zmo77yM5Y+q6ZyA6KaB5ZyoY3JlYXRl5Lit5o+Q5L6b5oyC6L2955qE5a655ZmoCiAgICB0aGlzLmJhcnJhZ2UgPSBuZXcgQkpZLkJhcnJhZ2UoewogICAgICAvLyDnu4Tku7bniLblrrnlmagKICAgICAgY29udGFpbmVyOiAkKCIuY2xhc3MtcGFuZWwiKSwKICAgICAgLy8g56e75Yqo6YCf5bqm77yM5q+P56eS56e75Yqo5aSa5bCR5Liq5YOP57SgCiAgICAgIHNwZWVkOiAxMDAsCiAgICAgIC8vIOacgOmVv+WPr+aYvuekuuWkmuWwkeS4quWtl++8jOi2hei/h+i/meS4quWtl+aVsOeahOS8mui/h+a7pAogICAgICBtYXhMZW5ndGg6IDIwLAogICAgICAvLyDlnKggdG9wIC0gYm90dG9tIOeahOWMuumXtOWHuueOsOW8ueW5lQogICAgICB0b3A6IDMwLAogICAgICBib3R0b206IDMwLAogICAgICAvLyDovajpgZPpq5jluqYKICAgICAgdHJhY2tIZWlnaHQ6IDMwLAogICAgICAvLyDmmK/lkKblj6rmmL7npLrmlofmnKzmtojmga8KICAgICAgdGV4dE9ubHk6IGZhbHNlLAogICAgICAvLyDlpoLmnpzpnIDopoHoh6rlrprkuYnlvLnluZXlhoXlrrnvvIzlj6/lrp7njrDmraTmlrnms5UKICAgICAgcmVuZGVyQ29udGVudDogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gZGF0YS5jb250ZW50OwogICAgICB9LAogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkge30sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/FunctionPanel","sourcesContent":["<template>\n  <div class=\"function-panel\">\n    <div class=\"left\">\n      <div class=\"bjy-spacer\"></div>\n      <!-- 上下课 -->\n      <div v-if=\"!isStudent\" @click=\"toggleClassStart\">\n        {{ statusTip }}\n      </div>\n\n      <!-- 录制按钮 -->\n      <Record class=\"bjy-custom-record\" v-if=\"!isStudent\" />\n\n      <div v-if=\"!isStudent\" @click=\"toggleQuiz\">测验</div>\n\n      <div v-if=\"!isStudent\" @click=\"toggleAnswer\">答题器</div>\n\n      <div v-if=\"!isStudent\" @click=\"toggleMediaPlayer\">播放</div>\n\n      <div v-if=\"!isStudent\" @click=\"toggleRollCall\">点名</div>\n\n      <div v-if=\"!isStudent\" @click=\"toggleLottery\">抽奖</div>\n\n      <div v-if=\"!isStudent\" @click=\"toggleAttentionDetection\">专注度检测</div>\n    </div>\n\n    <div class=\"right\">\n      <!-- 举手菜单 -->\n      <div v-if=\"isStudent\" class=\"btn-wrap\">\n        <SpeakApplyMenu />\n      </div>\n\n      <!-- 屏幕分享菜单 -->\n      <div class=\"btn-wrap\">\n        <ShareScreenMenu />\n      </div>\n\n      <!-- 弹幕按钮 -->\n      <div @click=\"toggleBarrage()\" class=\"btn-wrap\">\n        <i v-if=\"isBarrageOn\" class=\"icon icon-barrage-on\"></i>\n        <i v-else class=\"icon icon-barrage-off\"></i>\n        {{ barrageState }}\n      </div>\n\n      <!-- 线路切换 -->\n      <select\n        class=\"cdn-node-list\"\n        v-if=\"cdnList.length > 1 && canSwitchCdn\"\n        v-model=\"currentNode\"\n        name=\"cdn\"\n        id=\"cdn-list\"\n      >\n        <option v-for=\"index in cdnList.length\" :key=\"index\" :value=\"index\">\n          {{ index | cdnListFilter }}\n        </option>\n      </select>\n    </div>\n  </div>\n</template>\n\n<script>\nimport language from \"../../language/main\";\nimport SpeakApplyMenu from \"./SpeakApplyMenu\";\nimport ShareScreenMenu from \"./ShareScreenMenu\";\nimport Record from \"./Record\";\n\nlet store = BJY.store;\nlet eventEmitter = BJY.eventEmitter;\nlet auth = BJY.auth;\n\nexport default {\n  components: {\n    SpeakApplyMenu,\n    ShareScreenMenu,\n    Record,\n  },\n  data() {\n    return {\n      statusTip: \"\",\n      language: language,\n      isStudent: auth.isStudent(),\n      barrage: null,\n      isBarrageOn: false,\n      cdnList: [],\n      currentNode: 1,\n      canSwitchCdn: !BJY.auth.isWebRTC(),\n    };\n  },\n  computed: {\n    barrageState() {\n      return this.isBarrageOn ? language.BARRAGE_ON : language.BARRAGE_OFF;\n    },\n  },\n  watch: {\n    currentNode(newIndex, oldIndex) {\n      console.log(newIndex);\n      eventEmitter.trigger(eventEmitter.DOWNLINK_SERVER_NODE_CHANGE_TRIGGER, {\n        index: newIndex - 1,\n      });\n    },\n  },\n  filters: {\n    cdnListFilter(index) {\n      return \"线路\" + index;\n    },\n  },\n  methods: {\n    toggleClassStart() {\n      if (store.get(\"class.started\")) {\n        eventEmitter.trigger(eventEmitter.CLASS_END_TRIGGER);\n      } else {\n        eventEmitter.trigger(eventEmitter.CLASS_START_TRIGGER);\n      }\n    },\n    toggleBarrage() {\n      let isOpen = this.barrage.isOpened();\n      if (isOpen) {\n        this.barrage.close();\n        this.isBarrageOn = false;\n      } else {\n        this.barrage.open();\n        this.isBarrageOn = true;\n      }\n    },\n    toggleQuiz() {\n      eventEmitter.trigger(\"toggle_quiz_dialog\");\n    },\n    toggleAnswer() {\n      eventEmitter.trigger(\"toggle_answer_dialog\");\n    },\n    toggleMediaPlayer() {\n      eventEmitter.trigger(\"toggle_media_player\");\n    },\n    toggleRollCall() {\n      eventEmitter.trigger(\"toggle_roll_call\");\n    },\n    toggleLottery() {\n      eventEmitter.trigger(\"toggle_lottery\");\n    },\n    toggleAttentionDetection() {\n      eventEmitter.trigger(\"toggle_attention_detection\");\n    },\n  },\n  created() {\n    store.watch(\n      \"class.started\",\n      (started) => {\n        if (started) {\n          this.statusTip = language.CLASS_END;\n          this.$Toast(language.TIP_CLASS_START);\n        } else {\n          this.statusTip = language.CLASS_START;\n          this.$Toast(language.TIP_CLASS_END);\n        }\n        this.started = started;\n      },\n      true\n    );\n    // 获取k可用的cdn节点\n    this.cdnList = BJY.data.server.getLiveServerList();\n  },\n  mounted() {\n    // 调用 create 方法创建弹幕组件\n    // 弹幕组件不需要独立的容器，只需要在create中提供挂载的容器\n    this.barrage = new BJY.Barrage({\n      // 组件父容器\n      container: $(\".class-panel\"),\n      // 移动速度，每秒移动多少个像素\n      speed: 100,\n      // 最长可显示多少个字，超过这个字数的会过滤\n      maxLength: 20,\n      // 在 top - bottom 的区间出现弹幕\n      top: 30,\n      bottom: 30,\n      // 轨道高度\n      trackHeight: 30,\n      // 是否只显示文本消息\n      textOnly: false,\n      // 如果需要自定义弹幕内容，可实现此方法\n      renderContent: function (data) {\n        return data.content;\n      },\n    });\n  },\n  beforeDestroy() {},\n};\n</script>\n\n<style lang=\"scss\">\n//@import url(); 引入公共css类\n.function-panel {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n\n  .left,\n  .right {\n    display: flex;\n\n    & > * {\n      margin: 0 4px;\n      padding: 2px 12px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n\n      &:hover {\n        border-radius: 4px;\n        background-color: rgba(255, 255, 255, 0.3);\n        color: #fff;\n        transition: all 0.3s;\n      }\n    }\n\n    .bjy-custom-record {\n      display: flex;\n      align-items: center;\n\n      .bjy-menu-switcher {\n        padding: 0;\n\n        .bjy-label {\n          margin-left: 0;\n          vertical-align: unset;\n        }\n\n        &:hover {\n          background: none;\n          color: #bdc6cf;\n        }\n      }\n\n      .bjy-cloud-record-ing:after {\n        top: 5px;\n        left: -7px;\n      }\n    }\n  }\n\n  .bjy-spacer {\n    margin-right: 200px;\n  }\n}\n</style>\n"]}]}