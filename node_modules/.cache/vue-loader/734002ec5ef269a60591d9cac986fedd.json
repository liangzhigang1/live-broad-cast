{"remainingRequest":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/FunctionPanel/SpeakApplyMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/src/components/FunctionPanel/SpeakApplyMenu.vue","mtime":1611227050000},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/babel-loader/lib/index.js","mtime":1615566678361},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":1584009001591},{"path":"/Users/liangzg/Downloads/bjy-live-vue-demo/node_modules/vue-loader/lib/index.js","mtime":1615566687412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgbGFuZ3VhZ2UgZnJvbSAnLi4vLi4vbGFuZ3VhZ2UvbWFpbicKCmNvbnN0IHN0b3JlID0gQkpZLnN0b3JlCmNvbnN0IGV2ZW50RW1pdHRlciA9IEJKWS5ldmVudEVtaXR0ZXIKY29uc3QgYXV0aCA9IEJKWS5hdXRoOwpjb25zdCB1c2VyRGF0YSA9IEJKWS5kYXRhLnVzZXI7CgovKirmmK/lkKboh6rliqjkuIrpuqYgKi8KYXV0aC5jYW5PcGVuQ2FtZXJhV2hlblNwZWFraW5nID0gZnVuY3Rpb24gKHVzZXJUeXBlKSB7CiAgICByZXR1cm4gdHJ1ZTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYXllcjogbnVsbAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CgogIH0sCiAgY3JlYXRlZCAoKSB7CiAgfSwKICBtb3VudGVkICgpIHsKICAgIC8vIOe7keWumuS4gOS4que7k+adn+WPkeiogOS6i+S7tgogICAgZXZlbnRFbWl0dGVyLlNUT1BfU1BFQUtfVFJJR0dFUiA9ICdzdG9wX3NwZWFrX3RyaWdnZXInCiAgICBldmVudEVtaXR0ZXIKICAgICAgLm9uKAogICAgICAgIGV2ZW50RW1pdHRlci5TUEVBS19BUFBMWV9SRVNVTFRfVElNRU9VVCwKICAgICAgICAoZSwgZGF0YSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ3RpbWVvdXQnKQogICAgICAgICAgdGhpcy4kVG9hc3QobGFuZ3VhZ2UuVElQX1NQRUFLX0FQUExZX1RJTUVPVVQpCiAgICAgICAgfQogICAgICApCiAgICAgIC5vbigKICAgICAgICBldmVudEVtaXR0ZXIuU1BFQUtfQVBQTFlfUkVTVUxUX1JFSkVDVCwKICAgICAgICAoZSwgZGF0YSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ3JlamVjdCcpCiAgICAgICAgICB0aGlzLiRUb2FzdChsYW5ndWFnZS5USVBfU1BFQUtfQVBQTFlfUkVKRUNUKQogICAgICAgIH0KICAgICAgKQogICAgICAub24oCiAgICAgICAgZXZlbnRFbWl0dGVyLlNQRUFLX0FQUExZX1JFU1VMVF9BQ0NFUFQsCiAgICAgICAgKGUsIGRhdGEpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdhY2NlcHQnKQogICAgICAgICAgdGhpcy4kVG9hc3QobGFuZ3VhZ2UuVElQX1NQRUFLX0FQUExZX0FDQ0VQVCkKICAgICAgICAgIGV2ZW50RW1pdHRlci50cmlnZ2VyKGV2ZW50RW1pdHRlci5NRURJQV9TV0lUQ0hfVFJJR0dFUiwgewogICAgICAgICAgICB2aWRlb09uOiB0cnVlLAogICAgICAgICAgICBhdWRpb09uOiB0cnVlCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgKQoKICAgIEJKWS5TcGVha0FwcGx5TWVudS5jcmVhdGUoewogICAgICBlbGVtZW50OiAkKCcjbWVudS1zcGVhay1hcHBseScpLAogICAgICByZXBsYWNlOiBmYWxzZSwKICAgICAgLy8g5Li+5omL5oyJ6ZKu6KKr54K55Ye7CiAgICAgIG9uQXBwbHlDbGljazogKCkgPT4gewogICAgICAgIGlmIChzdG9yZS5nZXQoJ2NsYXNzLnN0YXJ0ZWQnKSkgewogICAgICAgICAgaWYgKHVzZXJEYXRhLmFjdGl2ZSgpLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3kuIrlj7DkurrmlbDlt7Lmu6EnKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBCSlkudXNlclNwZWFrLnN0YXJ0QXBwbHkoMTAgKiAxMDAwKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRUb2FzdChsYW5ndWFnZS5USVBfQ0xBU1NfTk9UX1NUQVJUKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9LAogICAgICAvLyDlj5bmtojkuL7miYvooqvngrnlh7sKICAgICAgb25DYW5jZWxDbGljazogKCkgPT4gewogICAgICAgIEJKWS51c2VyU3BlYWsuY2FuY2VsQXBwbHkoKQogICAgICB9LAogICAgICAvLyDnu5PmnZ/lj5HoqIDooqvngrnlh7sKICAgICAgb25TdG9wQ2xpY2s6ICgpID0+IHsKICAgICAgICBCSlkudXNlclNwZWFrLnN0b3BTcGVhayhCSlkuc3RvcmUuZ2V0KCd1c2VyLmlkJykpCiAgICAgICAgZXZlbnRFbWl0dGVyLnRyaWdnZXIoZXZlbnRFbWl0dGVyLlNUT1BfU1BFQUtfVFJJR0dFUikKICAgICAgICBldmVudEVtaXR0ZXIudHJpZ2dlcihldmVudEVtaXR0ZXIuTUVESUFfU1dJVENIX1RSSUdHRVIsIHsKICAgICAgICAgIHZpZGVvT246IGZhbHNlLAogICAgICAgICAgYXVkaW9PbjogZmFsc2UKICAgICAgICB9KQogICAgICB9CiAgICB9KQogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7fQp9Cg=="},{"version":3,"sources":["SpeakApplyMenu.vue"],"names":[],"mappings":";;;;;;;;AAQA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpeakApplyMenu.vue","sourceRoot":"src/components/FunctionPanel","sourcesContent":["<!-- 举手组件 -->\n<template>\n    <div id=\"menu-speak-apply\">\n    </div>\n</template>\n\n<script>\n\nimport language from '../../language/main'\n\nconst store = BJY.store\nconst eventEmitter = BJY.eventEmitter\nconst auth = BJY.auth;\nconst userData = BJY.data.user;\n\n/**是否自动上麦 */\nauth.canOpenCameraWhenSpeaking = function (userType) {\n    return true;\n};\n\nexport default {\n  components: {},\n  data () {\n    return {\n      player: null\n    }\n  },\n  computed: {},\n  watch: {},\n  methods: {\n\n  },\n  created () {\n  },\n  mounted () {\n    // 绑定一个结束发言事件\n    eventEmitter.STOP_SPEAK_TRIGGER = 'stop_speak_trigger'\n    eventEmitter\n      .on(\n        eventEmitter.SPEAK_APPLY_RESULT_TIMEOUT,\n        (e, data) => {\n          console.log('timeout')\n          this.$Toast(language.TIP_SPEAK_APPLY_TIMEOUT)\n        }\n      )\n      .on(\n        eventEmitter.SPEAK_APPLY_RESULT_REJECT,\n        (e, data) => {\n          console.log('reject')\n          this.$Toast(language.TIP_SPEAK_APPLY_REJECT)\n        }\n      )\n      .on(\n        eventEmitter.SPEAK_APPLY_RESULT_ACCEPT,\n        (e, data) => {\n          console.log('accept')\n          this.$Toast(language.TIP_SPEAK_APPLY_ACCEPT)\n          eventEmitter.trigger(eventEmitter.MEDIA_SWITCH_TRIGGER, {\n            videoOn: true,\n            audioOn: true\n          })\n        }\n      )\n\n    BJY.SpeakApplyMenu.create({\n      element: $('#menu-speak-apply'),\n      replace: false,\n      // 举手按钮被点击\n      onApplyClick: () => {\n        if (store.get('class.started')) {\n          if (userData.active().length >= 2) {\n            this.$Toast('当前上台人数已满')\n            return;\n          }\n          BJY.userSpeak.startApply(10 * 1000)\n        } else {\n          this.$Toast(language.TIP_CLASS_NOT_START)\n          return\n        }\n      },\n      // 取消举手被点击\n      onCancelClick: () => {\n        BJY.userSpeak.cancelApply()\n      },\n      // 结束发言被点击\n      onStopClick: () => {\n        BJY.userSpeak.stopSpeak(BJY.store.get('user.id'))\n        eventEmitter.trigger(eventEmitter.STOP_SPEAK_TRIGGER)\n        eventEmitter.trigger(eventEmitter.MEDIA_SWITCH_TRIGGER, {\n          videoOn: false,\n          audioOn: false\n        })\n      }\n    })\n  },\n  beforeDestroy () {}\n}\n</script>\n\n<style lang='scss' scoped>\n//@import url(); 引入公共css类\n\n</style>\n"]}]}